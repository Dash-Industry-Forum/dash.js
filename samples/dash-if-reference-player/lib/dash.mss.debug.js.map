{"version":3,"file":"dash.mss.debug.js","mappings":"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C;AACA,WAAKzG,KAAL,GAAaskB,IAAI,IAAIA,IAAI,CAACtkB,KAAb,GAAqBskB,IAAI,CAACtkB,KAAL,CAAWY,KAAX,GAAmB,GAAnB,GAAyB0jB,IAAI,CAACtkB,KAAL,CAAWwJ,GAAzD,GAA+D,IAA5E;AACA,WAAKxD,SAAL,GAAiBse,IAAI,IAAIA,IAAI,CAACte,SAAb,GAAyBse,IAAI,CAACte,SAA9B,GAA0C,IAA3D;AACH;;;;;;AAGL3C,eAAe,CAACklB,eAAhB,GAAkC,UAAlC;AACAllB,eAAe,CAACimB,eAAhB,GAAkC,UAAlC;AAEA,+DAAejmB,eAAf;;;;;;;;;;;;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;IACMC;AACF;AACJ;AACA;AACI,uBAAc;AAAA;;AACV;AACR;AACA;AACA;AACQ,OAAKimB,KAAL,GAAa,IAAb;AACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACQ,OAAK3lB,IAAL,GAAY,IAAZ;AACA;AACR;AACA;AACA;;AACQ,OAAK6C,GAAL,GAAW,IAAX;AACA;AACR;AACA;AACA;;AACQ,OAAK+iB,SAAL,GAAiB,IAAjB;AACA;AACR;AACA;AACA;;AACQ,OAAKxpB,KAAL,GAAa,IAAb;AACA;AACR;AACA;AACA;;AACQ,OAAKypB,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,SAAL,GAAiB,IAAjB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,YAAL,GAAoB,IAApB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,KAAL,GAAa,EAAb;AACA;AACR;AACA;AACA;;AACQ,OAAKC,IAAL,GAAY,IAAZ;AAEA;AACR;AACA;AACA;;AACQ,OAAKC,OAAL,GAAe,IAAf;AACA;AACR;AACA;AACA;;AACQ,OAAKC,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,cAAL,GAAsB,IAAtB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,QAAL,GAAgB,IAAhB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,gBAAL,GAAwB,IAAxB;AACA;AACR;AACA;AACA;;AACQ,OAAKC,gBAAL,GAAwB,IAAxB;AACA;AACR;AACA;;AACQ,OAAKC,eAAL,GAAuB,IAAvB;AACA;AACR;AACA;;AACQ,OAAKC,qBAAL,GAA6B,IAA7B;AACH;AAGL;AACA;AACA;AACA;;;IACMC;AACF;AACJ;AACA;AACI,4BAAc;AAAA;;AACV;AACR;AACA;AACA;AACQ,OAAKC,CAAL,GAAS,IAAT;AACA;AACR;AACA;AACA;;AACQ,OAAKzyB,CAAL,GAAS,IAAT;AACA;AACR;AACA;AACA;;AACQ,OAAKnC,CAAL,GAAS,EAAT;AACH;;AAGL0N,WAAW,CAACmnB,GAAZ,GAAkB,KAAlB;AACAnnB,WAAW,CAAConB,IAAZ,GAAmB,MAAnB;AACApnB,WAAW,CAACqnB,QAAZ,GAAuB,KAAvB;AACArnB,WAAW,CAACsnB,oBAAZ,GAAmC,gBAAnC;AACAtnB,WAAW,CAAC6lB,iBAAZ,GAAgC,uBAAhC;AACA7lB,WAAW,CAACunB,kBAAZ,GAAiC,cAAjC;AACAvnB,WAAW,CAAC+lB,kBAAZ,GAAiC,cAAjC;AACA/lB,WAAW,CAACwnB,gCAAZ,GAA+C,2BAA/C;AACAxnB,WAAW,CAAC2C,8BAAZ,GAA6C,qBAA7C;AACA3C,WAAW,CAACynB,kBAAZ,GAAiC,cAAjC;AACAznB,WAAW,CAAC0nB,OAAZ,GAAsB,SAAtB;AACA1nB,WAAW,CAAC2nB,qBAAZ,GAAoC,iBAApC;AACA3nB,WAAW,CAAC4nB,UAAZ,GAAyB,OAAzB;;;;;;;UCzLA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAIA;;AACA,IAAItT,OAAO,GAAI,OAAOkM,MAAP,KAAkB,WAAlB,IAAiCA,MAAlC,IAA6CqH,MAA3D;AAEA,IAAIrjB,MAAM,GAAG8P,OAAO,CAAC9P,MAArB;;AACA,IAAI,CAACA,MAAL,EAAa;AACTA,EAAAA,MAAM,GAAG8P,OAAO,CAAC9P,MAAR,GAAiB,EAA1B;AACH;;AAEDA,MAAM,CAACqQ,UAAP,GAAoBA,sDAApB;AAEA,+DAAerQ,MAAf","sources":["webpack://dashjs/webpack/universalModuleDefinition","webpack://dashjs/./externals/BigInteger.js","webpack://dashjs/./src/core/errors/ErrorsBase.js","webpack://dashjs/./src/core/events/EventsBase.js","webpack://dashjs/./src/mss/MssFragmentInfoController.js","webpack://dashjs/./src/mss/MssFragmentMoofProcessor.js","webpack://dashjs/./src/mss/MssFragmentMoovProcessor.js","webpack://dashjs/./src/mss/MssFragmentProcessor.js","webpack://dashjs/./src/mss/MssHandler.js","webpack://dashjs/./src/mss/errors/MssErrors.js","webpack://dashjs/./src/mss/parser/MssParser.js","webpack://dashjs/./src/streaming/MediaPlayerEvents.js","webpack://dashjs/./src/streaming/vo/DashJSError.js","webpack://dashjs/./src/streaming/vo/DataChunk.js","webpack://dashjs/./src/streaming/vo/FragmentRequest.js","webpack://dashjs/./src/streaming/vo/metrics/HTTPRequest.js","webpack://dashjs/webpack/bootstrap","webpack://dashjs/webpack/runtime/define property getters","webpack://dashjs/webpack/runtime/hasOwnProperty shorthand","webpack://dashjs/webpack/runtime/make namespace object","webpack://dashjs/./src/mss/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dashjs\"] = factory();\n\telse\n\t\troot[\"dashjs\"] = factory();\n})(self, function() {\nreturn ","var bigInt = function (undefined) {\r\n    'use strict';\r\n    var BASE = 1e7, LOG_BASE = 7, MAX_INT = 9007199254740992, MAX_INT_ARR = smallToArray(MAX_INT),\r\n        DEFAULT_ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz';\r\n    var supportsNativeBigInt = typeof BigInt === 'function';\r\n\r\n    function Integer(v, radix, alphabet, caseSensitive) {\r\n        if (typeof v === 'undefined') return Integer[0];\r\n        if (typeof radix !== 'undefined') return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);\r\n        return parseValue(v)\r\n    }\r\n\r\n    function BigInteger(value, sign) {\r\n        this.value = value;\r\n        this.sign = sign;\r\n        this.isSmall = false\r\n    }\r\n\r\n    BigInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function SmallInteger(value) {\r\n        this.value = value;\r\n        this.sign = value < 0;\r\n        this.isSmall = true\r\n    }\r\n\r\n    SmallInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function NativeBigInt(value) {\r\n        this.value = value\r\n    }\r\n\r\n    NativeBigInt.prototype = Object.create(Integer.prototype);\r\n\r\n    function isPrecise(n) {\r\n        return -MAX_INT < n && n < MAX_INT\r\n    }\r\n\r\n    function smallToArray(n) {\r\n        if (n < 1e7) return [n];\r\n        if (n < 1e14) return [n % 1e7, Math.floor(n / 1e7)];\r\n        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)]\r\n    }\r\n\r\n    function arrayToSmall(arr) {\r\n        trim(arr);\r\n        var length = arr.length;\r\n        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\r\n            switch (length) {\r\n                case 0:\r\n                    return 0;\r\n                case 1:\r\n                    return arr[0];\r\n                case 2:\r\n                    return arr[0] + arr[1] * BASE;\r\n                default:\r\n                    return arr[0] + (arr[1] + arr[2] * BASE) * BASE\r\n            }\r\n        }\r\n        return arr\r\n    }\r\n\r\n    function trim(v) {\r\n        var i = v.length;\r\n        while (v[--i] === 0) ;\r\n        v.length = i + 1\r\n    }\r\n\r\n    function createArray(length) {\r\n        var x = new Array(length);\r\n        var i = -1;\r\n        while (++i < length) {\r\n            x[i] = 0\r\n        }\r\n        return x\r\n    }\r\n\r\n    function truncate(n) {\r\n        if (n > 0) return Math.floor(n);\r\n        return Math.ceil(n)\r\n    }\r\n\r\n    function add(a, b) {\r\n        var l_a = a.length, l_b = b.length, r = new Array(l_a), carry = 0, base = BASE, sum, i;\r\n        for (i = 0; i < l_b; i++) {\r\n            sum = a[i] + b[i] + carry;\r\n            carry = sum >= base ? 1 : 0;\r\n            r[i] = sum - carry * base\r\n        }\r\n        while (i < l_a) {\r\n            sum = a[i] + carry;\r\n            carry = sum === base ? 1 : 0;\r\n            r[i++] = sum - carry * base\r\n        }\r\n        if (carry > 0) r.push(carry);\r\n        return r\r\n    }\r\n\r\n    function addAny(a, b) {\r\n        if (a.length >= b.length) return add(a, b);\r\n        return add(b, a)\r\n    }\r\n\r\n    function addSmall(a, carry) {\r\n        var l = a.length, r = new Array(l), base = BASE, sum, i;\r\n        for (i = 0; i < l; i++) {\r\n            sum = a[i] - base + carry;\r\n            carry = Math.floor(sum / base);\r\n            r[i] = sum - carry * base;\r\n            carry += 1\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base)\r\n        }\r\n        return r\r\n    }\r\n\r\n    BigInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.subtract(n.negate())\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall) {\r\n            return new BigInteger(addSmall(a, Math.abs(b)), this.sign)\r\n        }\r\n        return new BigInteger(addAny(a, b), this.sign)\r\n    };\r\n    BigInteger.prototype.plus = BigInteger.prototype.add;\r\n    SmallInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.subtract(n.negate())\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            if (isPrecise(a + b)) return new SmallInteger(a + b);\r\n            b = smallToArray(Math.abs(b))\r\n        }\r\n        return new BigInteger(addSmall(b, Math.abs(a)), a < 0)\r\n    };\r\n    SmallInteger.prototype.plus = SmallInteger.prototype.add;\r\n    NativeBigInt.prototype.add = function (v) {\r\n        return new NativeBigInt(this.value + parseValue(v).value)\r\n    };\r\n    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;\r\n\r\n    function subtract(a, b) {\r\n        var a_l = a.length, b_l = b.length, r = new Array(a_l), borrow = 0, base = BASE, i, difference;\r\n        for (i = 0; i < b_l; i++) {\r\n            difference = a[i] - borrow - b[i];\r\n            if (difference < 0) {\r\n                difference += base;\r\n                borrow = 1\r\n            } else borrow = 0;\r\n            r[i] = difference\r\n        }\r\n        for (i = b_l; i < a_l; i++) {\r\n            difference = a[i] - borrow;\r\n            if (difference < 0) difference += base; else {\r\n                r[i++] = difference;\r\n                break\r\n            }\r\n            r[i] = difference\r\n        }\r\n        for (; i < a_l; i++) {\r\n            r[i] = a[i]\r\n        }\r\n        trim(r);\r\n        return r\r\n    }\r\n\r\n    function subtractAny(a, b, sign) {\r\n        var value;\r\n        if (compareAbs(a, b) >= 0) {\r\n            value = subtract(a, b)\r\n        } else {\r\n            value = subtract(b, a);\r\n            sign = !sign\r\n        }\r\n        value = arrayToSmall(value);\r\n        if (typeof value === 'number') {\r\n            if (sign) value = -value;\r\n            return new SmallInteger(value)\r\n        }\r\n        return new BigInteger(value, sign)\r\n    }\r\n\r\n    function subtractSmall(a, b, sign) {\r\n        var l = a.length, r = new Array(l), carry = -b, base = BASE, i, difference;\r\n        for (i = 0; i < l; i++) {\r\n            difference = a[i] + carry;\r\n            carry = Math.floor(difference / base);\r\n            difference %= base;\r\n            r[i] = difference < 0 ? difference + base : difference\r\n        }\r\n        r = arrayToSmall(r);\r\n        if (typeof r === 'number') {\r\n            if (sign) r = -r;\r\n            return new SmallInteger(r)\r\n        }\r\n        return new BigInteger(r, sign)\r\n    }\r\n\r\n    BigInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.add(n.negate())\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall) return subtractSmall(a, Math.abs(b), this.sign);\r\n        return subtractAny(a, b, this.sign)\r\n    };\r\n    BigInteger.prototype.minus = BigInteger.prototype.subtract;\r\n    SmallInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.add(n.negate())\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            return new SmallInteger(a - b)\r\n        }\r\n        return subtractSmall(b, Math.abs(a), a >= 0)\r\n    };\r\n    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;\r\n    NativeBigInt.prototype.subtract = function (v) {\r\n        return new NativeBigInt(this.value - parseValue(v).value)\r\n    };\r\n    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;\r\n    BigInteger.prototype.negate = function () {\r\n        return new BigInteger(this.value, !this.sign)\r\n    };\r\n    SmallInteger.prototype.negate = function () {\r\n        var sign = this.sign;\r\n        var small = new SmallInteger(-this.value);\r\n        small.sign = !sign;\r\n        return small\r\n    };\r\n    NativeBigInt.prototype.negate = function () {\r\n        return new NativeBigInt(-this.value)\r\n    };\r\n    BigInteger.prototype.abs = function () {\r\n        return new BigInteger(this.value, false)\r\n    };\r\n    SmallInteger.prototype.abs = function () {\r\n        return new SmallInteger(Math.abs(this.value))\r\n    };\r\n    NativeBigInt.prototype.abs = function () {\r\n        return new NativeBigInt(this.value >= 0 ? this.value : -this.value)\r\n    };\r\n\r\n    function multiplyLong(a, b) {\r\n        var a_l = a.length, b_l = b.length, l = a_l + b_l, r = createArray(l), base = BASE, product, carry, i, a_i, b_j;\r\n        for (i = 0; i < a_l; ++i) {\r\n            a_i = a[i];\r\n            for (var j = 0; j < b_l; ++j) {\r\n                b_j = b[j];\r\n                product = a_i * b_j + r[i + j];\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n                r[i + j + 1] += carry\r\n            }\r\n        }\r\n        trim(r);\r\n        return r\r\n    }\r\n\r\n    function multiplySmall(a, b) {\r\n        var l = a.length, r = new Array(l), base = BASE, carry = 0, product, i;\r\n        for (i = 0; i < l; i++) {\r\n            product = a[i] * b + carry;\r\n            carry = Math.floor(product / base);\r\n            r[i] = product - carry * base\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base)\r\n        }\r\n        return r\r\n    }\r\n\r\n    function shiftLeft(x, n) {\r\n        var r = [];\r\n        while (n-- > 0) r.push(0);\r\n        return r.concat(x)\r\n    }\r\n\r\n    function multiplyKaratsuba(x, y) {\r\n        var n = Math.max(x.length, y.length);\r\n        if (n <= 30) return multiplyLong(x, y);\r\n        n = Math.ceil(n / 2);\r\n        var b = x.slice(n), a = x.slice(0, n), d = y.slice(n), c = y.slice(0, n);\r\n        var ac = multiplyKaratsuba(a, c), bd = multiplyKaratsuba(b, d),\r\n            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\r\n        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\r\n        trim(product);\r\n        return product\r\n    }\r\n\r\n    function useKaratsuba(l1, l2) {\r\n        return -.012 * l1 - .012 * l2 + 15e-6 * l1 * l2 > 0\r\n    }\r\n\r\n    BigInteger.prototype.multiply = function (v) {\r\n        var n = parseValue(v), a = this.value, b = n.value, sign = this.sign !== n.sign, abs;\r\n        if (n.isSmall) {\r\n            if (b === 0) return Integer[0];\r\n            if (b === 1) return this;\r\n            if (b === -1) return this.negate();\r\n            abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                return new BigInteger(multiplySmall(a, abs), sign)\r\n            }\r\n            b = smallToArray(abs)\r\n        }\r\n        if (useKaratsuba(a.length, b.length)) return new BigInteger(multiplyKaratsuba(a, b), sign);\r\n        return new BigInteger(multiplyLong(a, b), sign)\r\n    };\r\n    BigInteger.prototype.times = BigInteger.prototype.multiply;\r\n\r\n    function multiplySmallAndArray(a, b, sign) {\r\n        if (a < BASE) {\r\n            return new BigInteger(multiplySmall(b, a), sign)\r\n        }\r\n        return new BigInteger(multiplyLong(b, smallToArray(a)), sign)\r\n    }\r\n\r\n    SmallInteger.prototype._multiplyBySmall = function (a) {\r\n        if (isPrecise(a.value * this.value)) {\r\n            return new SmallInteger(a.value * this.value)\r\n        }\r\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign)\r\n    };\r\n    BigInteger.prototype._multiplyBySmall = function (a) {\r\n        if (a.value === 0) return Integer[0];\r\n        if (a.value === 1) return this;\r\n        if (a.value === -1) return this.negate();\r\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign)\r\n    };\r\n    SmallInteger.prototype.multiply = function (v) {\r\n        return parseValue(v)._multiplyBySmall(this)\r\n    };\r\n    SmallInteger.prototype.times = SmallInteger.prototype.multiply;\r\n    NativeBigInt.prototype.multiply = function (v) {\r\n        return new NativeBigInt(this.value * parseValue(v).value)\r\n    };\r\n    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;\r\n\r\n    function square(a) {\r\n        var l = a.length, r = createArray(l + l), base = BASE, product, carry, i, a_i, a_j;\r\n        for (i = 0; i < l; i++) {\r\n            a_i = a[i];\r\n            carry = 0 - a_i * a_i;\r\n            for (var j = i; j < l; j++) {\r\n                a_j = a[j];\r\n                product = 2 * (a_i * a_j) + r[i + j] + carry;\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base\r\n            }\r\n            r[i + l] = carry\r\n        }\r\n        trim(r);\r\n        return r\r\n    }\r\n\r\n    BigInteger.prototype.square = function () {\r\n        return new BigInteger(square(this.value), false)\r\n    };\r\n    SmallInteger.prototype.square = function () {\r\n        var value = this.value * this.value;\r\n        if (isPrecise(value)) return new SmallInteger(value);\r\n        return new BigInteger(square(smallToArray(Math.abs(this.value))), false)\r\n    };\r\n    NativeBigInt.prototype.square = function (v) {\r\n        return new NativeBigInt(this.value * this.value)\r\n    };\r\n\r\n    function divMod1(a, b) {\r\n        var a_l = a.length, b_l = b.length, base = BASE, result = createArray(b.length),\r\n            divisorMostSignificantDigit = b[b_l - 1], lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\r\n            remainder = multiplySmall(a, lambda), divisor = multiplySmall(b, lambda), quotientDigit, shift, carry,\r\n            borrow, i, l, q;\r\n        if (remainder.length <= a_l) remainder.push(0);\r\n        divisor.push(0);\r\n        divisorMostSignificantDigit = divisor[b_l - 1];\r\n        for (shift = a_l - b_l; shift >= 0; shift--) {\r\n            quotientDigit = base - 1;\r\n            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\r\n                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit)\r\n            }\r\n            carry = 0;\r\n            borrow = 0;\r\n            l = divisor.length;\r\n            for (i = 0; i < l; i++) {\r\n                carry += quotientDigit * divisor[i];\r\n                q = Math.floor(carry / base);\r\n                borrow += remainder[shift + i] - (carry - q * base);\r\n                carry = q;\r\n                if (borrow < 0) {\r\n                    remainder[shift + i] = borrow + base;\r\n                    borrow = -1\r\n                } else {\r\n                    remainder[shift + i] = borrow;\r\n                    borrow = 0\r\n                }\r\n            }\r\n            while (borrow !== 0) {\r\n                quotientDigit -= 1;\r\n                carry = 0;\r\n                for (i = 0; i < l; i++) {\r\n                    carry += remainder[shift + i] - base + divisor[i];\r\n                    if (carry < 0) {\r\n                        remainder[shift + i] = carry + base;\r\n                        carry = 0\r\n                    } else {\r\n                        remainder[shift + i] = carry;\r\n                        carry = 1\r\n                    }\r\n                }\r\n                borrow += carry\r\n            }\r\n            result[shift] = quotientDigit\r\n        }\r\n        remainder = divModSmall(remainder, lambda)[0];\r\n        return [arrayToSmall(result), arrayToSmall(remainder)]\r\n    }\r\n\r\n    function divMod2(a, b) {\r\n        var a_l = a.length, b_l = b.length, result = [], part = [], base = BASE, guess, xlen, highx, highy, check;\r\n        while (a_l) {\r\n            part.unshift(a[--a_l]);\r\n            trim(part);\r\n            if (compareAbs(part, b) < 0) {\r\n                result.push(0);\r\n                continue\r\n            }\r\n            xlen = part.length;\r\n            highx = part[xlen - 1] * base + part[xlen - 2];\r\n            highy = b[b_l - 1] * base + b[b_l - 2];\r\n            if (xlen > b_l) {\r\n                highx = (highx + 1) * base\r\n            }\r\n            guess = Math.ceil(highx / highy);\r\n            do {\r\n                check = multiplySmall(b, guess);\r\n                if (compareAbs(check, part) <= 0) break;\r\n                guess--\r\n            } while (guess);\r\n            result.push(guess);\r\n            part = subtract(part, check)\r\n        }\r\n        result.reverse();\r\n        return [arrayToSmall(result), arrayToSmall(part)]\r\n    }\r\n\r\n    function divModSmall(value, lambda) {\r\n        var length = value.length, quotient = createArray(length), base = BASE, i, q, remainder, divisor;\r\n        remainder = 0;\r\n        for (i = length - 1; i >= 0; --i) {\r\n            divisor = remainder * base + value[i];\r\n            q = truncate(divisor / lambda);\r\n            remainder = divisor - q * lambda;\r\n            quotient[i] = q | 0\r\n        }\r\n        return [quotient, remainder | 0]\r\n    }\r\n\r\n    function divModAny(self, v) {\r\n        var value, n = parseValue(v);\r\n        if (supportsNativeBigInt) {\r\n            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)]\r\n        }\r\n        var a = self.value, b = n.value;\r\n        var quotient;\r\n        if (b === 0) throw new Error('Cannot divide by zero');\r\n        if (self.isSmall) {\r\n            if (n.isSmall) {\r\n                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)]\r\n            }\r\n            return [Integer[0], self]\r\n        }\r\n        if (n.isSmall) {\r\n            if (b === 1) return [self, Integer[0]];\r\n            if (b == -1) return [self.negate(), Integer[0]];\r\n            var abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                value = divModSmall(a, abs);\r\n                quotient = arrayToSmall(value[0]);\r\n                var remainder = value[1];\r\n                if (self.sign) remainder = -remainder;\r\n                if (typeof quotient === 'number') {\r\n                    if (self.sign !== n.sign) quotient = -quotient;\r\n                    return [new SmallInteger(quotient), new SmallInteger(remainder)]\r\n                }\r\n                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)]\r\n            }\r\n            b = smallToArray(abs)\r\n        }\r\n        var comparison = compareAbs(a, b);\r\n        if (comparison === -1) return [Integer[0], self];\r\n        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\r\n        if (a.length + b.length <= 200) value = divMod1(a, b); else value = divMod2(a, b);\r\n        quotient = value[0];\r\n        var qSign = self.sign !== n.sign, mod = value[1], mSign = self.sign;\r\n        if (typeof quotient === 'number') {\r\n            if (qSign) quotient = -quotient;\r\n            quotient = new SmallInteger(quotient)\r\n        } else quotient = new BigInteger(quotient, qSign);\r\n        if (typeof mod === 'number') {\r\n            if (mSign) mod = -mod;\r\n            mod = new SmallInteger(mod)\r\n        } else mod = new BigInteger(mod, mSign);\r\n        return [quotient, mod]\r\n    }\r\n\r\n    BigInteger.prototype.divmod = function (v) {\r\n        var result = divModAny(this, v);\r\n        return { quotient: result[0], remainder: result[1] }\r\n    };\r\n    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;\r\n    BigInteger.prototype.divide = function (v) {\r\n        return divModAny(this, v)[0]\r\n    };\r\n    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {\r\n        return new NativeBigInt(this.value / parseValue(v).value)\r\n    };\r\n    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\r\n    BigInteger.prototype.mod = function (v) {\r\n        return divModAny(this, v)[1]\r\n    };\r\n    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {\r\n        return new NativeBigInt(this.value % parseValue(v).value)\r\n    };\r\n    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\r\n    BigInteger.prototype.pow = function (v) {\r\n        var n = parseValue(v), a = this.value, b = n.value, value, x, y;\r\n        if (b === 0) return Integer[1];\r\n        if (a === 0) return Integer[0];\r\n        if (a === 1) return Integer[1];\r\n        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.sign) {\r\n            return Integer[0]\r\n        }\r\n        if (!n.isSmall) throw new Error('The exponent ' + n.toString() + ' is too large.');\r\n        if (this.isSmall) {\r\n            if (isPrecise(value = Math.pow(a, b))) return new SmallInteger(truncate(value))\r\n        }\r\n        x = this;\r\n        y = Integer[1];\r\n        while (true) {\r\n            if (b & 1 === 1) {\r\n                y = y.times(x);\r\n                --b\r\n            }\r\n            if (b === 0) break;\r\n            b /= 2;\r\n            x = x.square()\r\n        }\r\n        return y\r\n    };\r\n    SmallInteger.prototype.pow = BigInteger.prototype.pow;\r\n    NativeBigInt.prototype.pow = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value, b = n.value;\r\n        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);\r\n        if (b === _0) return Integer[1];\r\n        if (a === _0) return Integer[0];\r\n        if (a === _1) return Integer[1];\r\n        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.isNegative()) return new NativeBigInt(_0);\r\n        var x = this;\r\n        var y = Integer[1];\r\n        while (true) {\r\n            if ((b & _1) === _1) {\r\n                y = y.times(x);\r\n                --b\r\n            }\r\n            if (b === _0) break;\r\n            b /= _2;\r\n            x = x.square()\r\n        }\r\n        return y\r\n    };\r\n    BigInteger.prototype.modPow = function (exp, mod) {\r\n        exp = parseValue(exp);\r\n        mod = parseValue(mod);\r\n        if (mod.isZero()) throw new Error('Cannot take modPow with modulus 0');\r\n        var r = Integer[1], base = this.mod(mod);\r\n        while (exp.isPositive()) {\r\n            if (base.isZero()) return Integer[0];\r\n            if (exp.isOdd()) r = r.multiply(base).mod(mod);\r\n            exp = exp.divide(2);\r\n            base = base.square().mod(mod)\r\n        }\r\n        return r\r\n    };\r\n    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;\r\n\r\n    function compareAbs(a, b) {\r\n        if (a.length !== b.length) {\r\n            return a.length > b.length ? 1 : -1\r\n        }\r\n        for (var i = a.length - 1; i >= 0; i--) {\r\n            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1\r\n        }\r\n        return 0\r\n    }\r\n\r\n    BigInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v), a = this.value, b = n.value;\r\n        if (n.isSmall) return 1;\r\n        return compareAbs(a, b)\r\n    };\r\n    SmallInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v), a = Math.abs(this.value), b = n.value;\r\n        if (n.isSmall) {\r\n            b = Math.abs(b);\r\n            return a === b ? 0 : a > b ? 1 : -1\r\n        }\r\n        return -1\r\n    };\r\n    NativeBigInt.prototype.compareAbs = function (v) {\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        a = a >= 0 ? a : -a;\r\n        b = b >= 0 ? b : -b;\r\n        return a === b ? 0 : a > b ? 1 : -1\r\n    };\r\n    BigInteger.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1\r\n        }\r\n        var n = parseValue(v), a = this.value, b = n.value;\r\n        if (this.sign !== n.sign) {\r\n            return n.sign ? 1 : -1\r\n        }\r\n        if (n.isSmall) {\r\n            return this.sign ? -1 : 1\r\n        }\r\n        return compareAbs(a, b) * (this.sign ? -1 : 1)\r\n    };\r\n    BigInteger.prototype.compareTo = BigInteger.prototype.compare;\r\n    SmallInteger.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1\r\n        }\r\n        var n = parseValue(v), a = this.value, b = n.value;\r\n        if (n.isSmall) {\r\n            return a == b ? 0 : a > b ? 1 : -1\r\n        }\r\n        if (a < 0 !== n.sign) {\r\n            return a < 0 ? -1 : 1\r\n        }\r\n        return a < 0 ? 1 : -1\r\n    };\r\n    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\r\n    NativeBigInt.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1\r\n        }\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        return a === b ? 0 : a > b ? 1 : -1\r\n    };\r\n    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;\r\n    BigInteger.prototype.equals = function (v) {\r\n        return this.compare(v) === 0\r\n    };\r\n    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\r\n    BigInteger.prototype.notEquals = function (v) {\r\n        return this.compare(v) !== 0\r\n    };\r\n    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\r\n    BigInteger.prototype.greater = function (v) {\r\n        return this.compare(v) > 0\r\n    };\r\n    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\r\n    BigInteger.prototype.lesser = function (v) {\r\n        return this.compare(v) < 0\r\n    };\r\n    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\r\n    BigInteger.prototype.greaterOrEquals = function (v) {\r\n        return this.compare(v) >= 0\r\n    };\r\n    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\r\n    BigInteger.prototype.lesserOrEquals = function (v) {\r\n        return this.compare(v) <= 0\r\n    };\r\n    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\r\n    BigInteger.prototype.isEven = function () {\r\n        return (this.value[0] & 1) === 0\r\n    };\r\n    SmallInteger.prototype.isEven = function () {\r\n        return (this.value & 1) === 0\r\n    };\r\n    NativeBigInt.prototype.isEven = function () {\r\n        return (this.value & BigInt(1)) === BigInt(0)\r\n    };\r\n    BigInteger.prototype.isOdd = function () {\r\n        return (this.value[0] & 1) === 1\r\n    };\r\n    SmallInteger.prototype.isOdd = function () {\r\n        return (this.value & 1) === 1\r\n    };\r\n    NativeBigInt.prototype.isOdd = function () {\r\n        return (this.value & BigInt(1)) === BigInt(1)\r\n    };\r\n    BigInteger.prototype.isPositive = function () {\r\n        return !this.sign\r\n    };\r\n    SmallInteger.prototype.isPositive = function () {\r\n        return this.value > 0\r\n    };\r\n    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;\r\n    BigInteger.prototype.isNegative = function () {\r\n        return this.sign\r\n    };\r\n    SmallInteger.prototype.isNegative = function () {\r\n        return this.value < 0\r\n    };\r\n    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;\r\n    BigInteger.prototype.isUnit = function () {\r\n        return false\r\n    };\r\n    SmallInteger.prototype.isUnit = function () {\r\n        return Math.abs(this.value) === 1\r\n    };\r\n    NativeBigInt.prototype.isUnit = function () {\r\n        return this.abs().value === BigInt(1)\r\n    };\r\n    BigInteger.prototype.isZero = function () {\r\n        return false\r\n    };\r\n    SmallInteger.prototype.isZero = function () {\r\n        return this.value === 0\r\n    };\r\n    NativeBigInt.prototype.isZero = function () {\r\n        return this.value === BigInt(0)\r\n    };\r\n    BigInteger.prototype.isDivisibleBy = function (v) {\r\n        var n = parseValue(v);\r\n        if (n.isZero()) return false;\r\n        if (n.isUnit()) return true;\r\n        if (n.compareAbs(2) === 0) return this.isEven();\r\n        return this.mod(n).isZero()\r\n    };\r\n    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\r\n\r\n    function isBasicPrime(v) {\r\n        var n = v.abs();\r\n        if (n.isUnit()) return false;\r\n        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\r\n        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\r\n        if (n.lesser(49)) return true\r\n    }\r\n\r\n    function millerRabinTest(n, a) {\r\n        var nPrev = n.prev(), b = nPrev, r = 0, d, t, i, x;\r\n        while (b.isEven()) b = b.divide(2), r++;\r\n        next:for (i = 0; i < a.length; i++) {\r\n            if (n.lesser(a[i])) continue;\r\n            x = bigInt(a[i]).modPow(b, n);\r\n            if (x.isUnit() || x.equals(nPrev)) continue;\r\n            for (d = r - 1; d != 0; d--) {\r\n                x = x.square().mod(n);\r\n                if (x.isUnit()) return false;\r\n                if (x.equals(nPrev)) continue next\r\n            }\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n\r\n    BigInteger.prototype.isPrime = function (strict) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var bits = n.bitLength();\r\n        if (bits <= 64) return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\r\n        var logN = Math.log(2) * bits.toJSNumber();\r\n        var t = Math.ceil(strict === true ? 2 * Math.pow(logN, 2) : logN);\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt(i + 2))\r\n        }\r\n        return millerRabinTest(n, a)\r\n    };\r\n    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\r\n    BigInteger.prototype.isProbablePrime = function (iterations) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var t = iterations === undefined ? 5 : iterations;\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt.randBetween(2, n.minus(2)))\r\n        }\r\n        return millerRabinTest(n, a)\r\n    };\r\n    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\r\n    BigInteger.prototype.modInv = function (n) {\r\n        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\r\n        while (!newR.isZero()) {\r\n            q = r.divide(newR);\r\n            lastT = t;\r\n            lastR = r;\r\n            t = newT;\r\n            r = newR;\r\n            newT = lastT.subtract(q.multiply(newT));\r\n            newR = lastR.subtract(q.multiply(newR))\r\n        }\r\n        if (!r.isUnit()) throw new Error(this.toString() + ' and ' + n.toString() + ' are not co-prime');\r\n        if (t.compare(0) === -1) {\r\n            t = t.add(n)\r\n        }\r\n        if (this.isNegative()) {\r\n            return t.negate()\r\n        }\r\n        return t\r\n    };\r\n    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;\r\n    BigInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return subtractSmall(value, 1, this.sign)\r\n        }\r\n        return new BigInteger(addSmall(value, 1), this.sign)\r\n    };\r\n    SmallInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\r\n        return new BigInteger(MAX_INT_ARR, false)\r\n    };\r\n    NativeBigInt.prototype.next = function () {\r\n        return new NativeBigInt(this.value + BigInt(1))\r\n    };\r\n    BigInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return new BigInteger(addSmall(value, 1), true)\r\n        }\r\n        return subtractSmall(value, 1, this.sign)\r\n    };\r\n    SmallInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\r\n        return new BigInteger(MAX_INT_ARR, true)\r\n    };\r\n    NativeBigInt.prototype.prev = function () {\r\n        return new NativeBigInt(this.value - BigInt(1))\r\n    };\r\n    var powersOfTwo = [1];\r\n    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\r\n    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\r\n\r\n    function shift_isSmall(n) {\r\n        return Math.abs(n) <= BASE\r\n    }\r\n\r\n    BigInteger.prototype.shiftLeft = function (v) {\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + ' is too large for shifting.')\r\n        }\r\n        if (n < 0) return this.shiftRight(-n);\r\n        var result = this;\r\n        if (result.isZero()) return result;\r\n        while (n >= powers2Length) {\r\n            result = result.multiply(highestPower2);\r\n            n -= powers2Length - 1\r\n        }\r\n        return result.multiply(powersOfTwo[n])\r\n    };\r\n    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\r\n    BigInteger.prototype.shiftRight = function (v) {\r\n        var remQuo;\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + ' is too large for shifting.')\r\n        }\r\n        if (n < 0) return this.shiftLeft(-n);\r\n        var result = this;\r\n        while (n >= powers2Length) {\r\n            if (result.isZero() || result.isNegative() && result.isUnit()) return result;\r\n            remQuo = divModAny(result, highestPower2);\r\n            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n            n -= powers2Length - 1\r\n        }\r\n        remQuo = divModAny(result, powersOfTwo[n]);\r\n        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0]\r\n    };\r\n    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\r\n\r\n    function bitwise(x, y, fn) {\r\n        y = parseValue(y);\r\n        var xSign = x.isNegative(), ySign = y.isNegative();\r\n        var xRem = xSign ? x.not() : x, yRem = ySign ? y.not() : y;\r\n        var xDigit = 0, yDigit = 0;\r\n        var xDivMod = null, yDivMod = null;\r\n        var result = [];\r\n        while (!xRem.isZero() || !yRem.isZero()) {\r\n            xDivMod = divModAny(xRem, highestPower2);\r\n            xDigit = xDivMod[1].toJSNumber();\r\n            if (xSign) {\r\n                xDigit = highestPower2 - 1 - xDigit\r\n            }\r\n            yDivMod = divModAny(yRem, highestPower2);\r\n            yDigit = yDivMod[1].toJSNumber();\r\n            if (ySign) {\r\n                yDigit = highestPower2 - 1 - yDigit\r\n            }\r\n            xRem = xDivMod[0];\r\n            yRem = yDivMod[0];\r\n            result.push(fn(xDigit, yDigit))\r\n        }\r\n        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);\r\n        for (var i = result.length - 1; i >= 0; i -= 1) {\r\n            sum = sum.multiply(highestPower2).add(bigInt(result[i]))\r\n        }\r\n        return sum\r\n    }\r\n\r\n    BigInteger.prototype.not = function () {\r\n        return this.negate().prev()\r\n    };\r\n    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;\r\n    BigInteger.prototype.and = function (n) {\r\n        return bitwise(this, n, function (a, b) {\r\n            return a & b\r\n        })\r\n    };\r\n    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;\r\n    BigInteger.prototype.or = function (n) {\r\n        return bitwise(this, n, function (a, b) {\r\n            return a | b\r\n        })\r\n    };\r\n    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;\r\n    BigInteger.prototype.xor = function (n) {\r\n        return bitwise(this, n, function (a, b) {\r\n            return a ^ b\r\n        })\r\n    };\r\n    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;\r\n    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\r\n\r\n    function roughLOB(n) {\r\n        var v = n.value,\r\n            x = typeof v === 'number' ? v | LOBMASK_I : typeof v === 'bigint' ? v | BigInt(LOBMASK_I) : v[0] + v[1] * BASE | LOBMASK_BI;\r\n        return x & -x\r\n    }\r\n\r\n    function integerLogarithm(value, base) {\r\n        if (base.compareTo(value) <= 0) {\r\n            var tmp = integerLogarithm(value, base.square(base));\r\n            var p = tmp.p;\r\n            var e = tmp.e;\r\n            var t = p.multiply(base);\r\n            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 }\r\n        }\r\n        return { p: bigInt(1), e: 0 }\r\n    }\r\n\r\n    BigInteger.prototype.bitLength = function () {\r\n        var n = this;\r\n        if (n.compareTo(bigInt(0)) < 0) {\r\n            n = n.negate().subtract(bigInt(1))\r\n        }\r\n        if (n.compareTo(bigInt(0)) === 0) {\r\n            return bigInt(0)\r\n        }\r\n        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1))\r\n    };\r\n    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;\r\n\r\n    function max(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.greater(b) ? a : b\r\n    }\r\n\r\n    function min(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.lesser(b) ? a : b\r\n    }\r\n\r\n    function gcd(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        if (a.equals(b)) return a;\r\n        if (a.isZero()) return b;\r\n        if (b.isZero()) return a;\r\n        var c = Integer[1], d, t;\r\n        while (a.isEven() && b.isEven()) {\r\n            d = min(roughLOB(a), roughLOB(b));\r\n            a = a.divide(d);\r\n            b = b.divide(d);\r\n            c = c.multiply(d)\r\n        }\r\n        while (a.isEven()) {\r\n            a = a.divide(roughLOB(a))\r\n        }\r\n        do {\r\n            while (b.isEven()) {\r\n                b = b.divide(roughLOB(b))\r\n            }\r\n            if (a.greater(b)) {\r\n                t = b;\r\n                b = a;\r\n                a = t\r\n            }\r\n            b = b.subtract(a)\r\n        } while (!b.isZero());\r\n        return c.isUnit() ? a : a.multiply(c)\r\n    }\r\n\r\n    function lcm(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        return a.divide(gcd(a, b)).multiply(b)\r\n    }\r\n\r\n    function randBetween(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        var low = min(a, b), high = max(a, b);\r\n        var range = high.subtract(low).add(1);\r\n        if (range.isSmall) return low.add(Math.floor(Math.random() * range));\r\n        var digits = toBase(range, BASE).value;\r\n        var result = [], restricted = true;\r\n        for (var i = 0; i < digits.length; i++) {\r\n            var top = restricted ? digits[i] : BASE;\r\n            var digit = truncate(Math.random() * top);\r\n            result.push(digit);\r\n            if (digit < top) restricted = false\r\n        }\r\n        return low.add(Integer.fromArray(result, BASE, false))\r\n    }\r\n\r\n    var parseBase = function (text, base, alphabet, caseSensitive) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        text = String(text);\r\n        if (!caseSensitive) {\r\n            text = text.toLowerCase();\r\n            alphabet = alphabet.toLowerCase()\r\n        }\r\n        var length = text.length;\r\n        var i;\r\n        var absBase = Math.abs(base);\r\n        var alphabetValues = {};\r\n        for (i = 0; i < alphabet.length; i++) {\r\n            alphabetValues[alphabet[i]] = i\r\n        }\r\n        for (i = 0; i < length; i++) {\r\n            var c = text[i];\r\n            if (c === '-') continue;\r\n            if (c in alphabetValues) {\r\n                if (alphabetValues[c] >= absBase) {\r\n                    if (c === '1' && absBase === 1) continue;\r\n                    throw new Error(c + ' is not a valid digit in base ' + base + '.')\r\n                }\r\n            }\r\n        }\r\n        base = parseValue(base);\r\n        var digits = [];\r\n        var isNegative = text[0] === '-';\r\n        for (i = isNegative ? 1 : 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c])); else if (c === '<') {\r\n                var start = i;\r\n                do {\r\n                    i++\r\n                } while (text[i] !== '>' && i < text.length);\r\n                digits.push(parseValue(text.slice(start + 1, i)))\r\n            } else throw new Error(c + ' is not a valid character')\r\n        }\r\n        return parseBaseFromArray(digits, base, isNegative)\r\n    };\r\n\r\n    function parseBaseFromArray(digits, base, isNegative) {\r\n        var val = Integer[0], pow = Integer[1], i;\r\n        for (i = digits.length - 1; i >= 0; i--) {\r\n            val = val.add(digits[i].times(pow));\r\n            pow = pow.times(base)\r\n        }\r\n        return isNegative ? val.negate() : val\r\n    }\r\n\r\n    function stringify(digit, alphabet) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        if (digit < alphabet.length) {\r\n            return alphabet[digit]\r\n        }\r\n        return '<' + digit + '>'\r\n    }\r\n\r\n    function toBase(n, base) {\r\n        base = bigInt(base);\r\n        if (base.isZero()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            throw new Error('Cannot convert nonzero numbers to base 0.')\r\n        }\r\n        if (base.equals(-1)) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            if (n.isNegative()) return {\r\n                value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber())).map(Array.prototype.valueOf, [1, 0])),\r\n                isNegative: false\r\n            };\r\n            var arr = Array.apply(null, Array(n.toJSNumber() - 1)).map(Array.prototype.valueOf, [0, 1]);\r\n            arr.unshift([1]);\r\n            return { value: [].concat.apply([], arr), isNegative: false }\r\n        }\r\n        var neg = false;\r\n        if (n.isNegative() && base.isPositive()) {\r\n            neg = true;\r\n            n = n.abs()\r\n        }\r\n        if (base.isUnit()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            return { value: Array.apply(null, Array(n.toJSNumber())).map(Number.prototype.valueOf, 1), isNegative: neg }\r\n        }\r\n        var out = [];\r\n        var left = n, divmod;\r\n        while (left.isNegative() || left.compareAbs(base) >= 0) {\r\n            divmod = left.divmod(base);\r\n            left = divmod.quotient;\r\n            var digit = divmod.remainder;\r\n            if (digit.isNegative()) {\r\n                digit = base.minus(digit).abs();\r\n                left = left.next()\r\n            }\r\n            out.push(digit.toJSNumber())\r\n        }\r\n        out.push(left.toJSNumber());\r\n        return { value: out.reverse(), isNegative: neg }\r\n    }\r\n\r\n    function toBaseString(n, base, alphabet) {\r\n        var arr = toBase(n, base);\r\n        return (arr.isNegative ? '-' : '') + arr.value.map(function (x) {\r\n            return stringify(x, alphabet)\r\n        }).join('')\r\n    }\r\n\r\n    BigInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix)\r\n    };\r\n    SmallInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix)\r\n    };\r\n    NativeBigInt.prototype.toArray = function (radix) {\r\n        return toBase(this, radix)\r\n    };\r\n    BigInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix !== 10) return toBaseString(this, radix, alphabet);\r\n        var v = this.value, l = v.length, str = String(v[--l]), zeros = '0000000', digit;\r\n        while (--l >= 0) {\r\n            digit = String(v[l]);\r\n            str += zeros.slice(digit.length) + digit\r\n        }\r\n        var sign = this.sign ? '-' : '';\r\n        return sign + str\r\n    };\r\n    SmallInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix != 10) return toBaseString(this, radix, alphabet);\r\n        return String(this.value)\r\n    };\r\n    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;\r\n    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () {\r\n        return this.toString()\r\n    };\r\n    BigInteger.prototype.valueOf = function () {\r\n        return parseInt(this.toString(), 10)\r\n    };\r\n    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\r\n    SmallInteger.prototype.valueOf = function () {\r\n        return this.value\r\n    };\r\n    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\r\n    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {\r\n        return parseInt(this.toString(), 10)\r\n    };\r\n\r\n    function parseStringValue(v) {\r\n        if (isPrecise(+v)) {\r\n            var x = +v;\r\n            if (x === truncate(x)) return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);\r\n            throw new Error('Invalid integer: ' + v)\r\n        }\r\n        var sign = v[0] === '-';\r\n        if (sign) v = v.slice(1);\r\n        var split = v.split(/e/i);\r\n        if (split.length > 2) throw new Error('Invalid integer: ' + split.join('e'));\r\n        if (split.length === 2) {\r\n            var exp = split[1];\r\n            if (exp[0] === '+') exp = exp.slice(1);\r\n            exp = +exp;\r\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error('Invalid integer: ' + exp + ' is not a valid exponent.');\r\n            var text = split[0];\r\n            var decimalPlace = text.indexOf('.');\r\n            if (decimalPlace >= 0) {\r\n                exp -= text.length - decimalPlace - 1;\r\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1)\r\n            }\r\n            if (exp < 0) throw new Error('Cannot include negative exponent part for integers');\r\n            text += new Array(exp + 1).join('0');\r\n            v = text\r\n        }\r\n        var isValid = /^([0-9][0-9]*)$/.test(v);\r\n        if (!isValid) throw new Error('Invalid integer: ' + v);\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(sign ? '-' + v : v))\r\n        }\r\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\r\n        while (max > 0) {\r\n            r.push(+v.slice(min, max));\r\n            min -= l;\r\n            if (min < 0) min = 0;\r\n            max -= l\r\n        }\r\n        trim(r);\r\n        return new BigInteger(r, sign)\r\n    }\r\n\r\n    function parseNumberValue(v) {\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(v))\r\n        }\r\n        if (isPrecise(v)) {\r\n            if (v !== truncate(v)) throw new Error(v + ' is not an integer.');\r\n            return new SmallInteger(v)\r\n        }\r\n        return parseStringValue(v.toString())\r\n    }\r\n\r\n    function parseValue(v) {\r\n        if (typeof v === 'number') {\r\n            return parseNumberValue(v)\r\n        }\r\n        if (typeof v === 'string') {\r\n            return parseStringValue(v)\r\n        }\r\n        if (typeof v === 'bigint') {\r\n            return new NativeBigInt(v)\r\n        }\r\n        return v\r\n    }\r\n\r\n    for (var i = 0; i < 1e3; i++) {\r\n        Integer[i] = parseValue(i);\r\n        if (i > 0) Integer[-i] = parseValue(-i)\r\n    }\r\n    Integer.one = Integer[1];\r\n    Integer.zero = Integer[0];\r\n    Integer.minusOne = Integer[-1];\r\n    Integer.max = max;\r\n    Integer.min = min;\r\n    Integer.gcd = gcd;\r\n    Integer.lcm = lcm;\r\n    Integer.isInstance = function (x) {\r\n        return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt\r\n    };\r\n    Integer.randBetween = randBetween;\r\n    Integer.fromArray = function (digits, base, isNegative) {\r\n        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative)\r\n    };\r\n    return Integer\r\n}();\r\nif (typeof module !== 'undefined' && module.hasOwnProperty('exports')) {\r\n    module.exports = bigInt\r\n}\r\nif (typeof define === 'function' && define.amd) {\r\n    define('big-integer', [], function () {\r\n        return bigInt\r\n    })\r\n}\r\n\r\nexport default bigInt\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n/**\r\n * @class\r\n * @ignore\r\n */\r\nclass ErrorsBase {\r\n    extend (errors, config) {\r\n        if (!errors) return;\r\n\r\n        let override = config ? config.override : false;\r\n        let publicOnly = config ? config.publicOnly : false;\r\n\r\n\r\n        for (const err in errors) {\r\n            if (!errors.hasOwnProperty(err) || (this[err] && !override)) continue;\r\n            if (publicOnly && errors[err].indexOf('public_') === -1) continue;\r\n            this[err] = errors[err];\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default ErrorsBase;","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n/**\r\n * @class\r\n * @ignore\r\n */\r\nclass EventsBase {\r\n    extend (events, config) {\r\n        if (!events) return;\r\n\r\n        let override = config ? config.override : false;\r\n        let publicOnly = config ? config.publicOnly : false;\r\n\r\n\r\n        for (const evt in events) {\r\n            if (!events.hasOwnProperty(evt) || (this[evt] && !override)) continue;\r\n            if (publicOnly && events[evt].indexOf('public_') === -1) continue;\r\n            this[evt] = events[evt];\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default EventsBase;","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nimport FragmentRequest from '../streaming/vo/FragmentRequest.js';\r\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest.js';\r\n\r\nfunction MssFragmentInfoController(config) {\r\n\r\n    config = config || {};\r\n\r\n    let instance,\r\n        logger,\r\n        fragmentModel,\r\n        started,\r\n        type,\r\n        loadFragmentTimeout,\r\n        startTime,\r\n        startFragmentTime,\r\n        index;\r\n\r\n    const streamProcessor = config.streamProcessor;\r\n    const baseURLController = config.baseURLController;\r\n    const debug = config.debug;\r\n    const controllerType = 'MssFragmentInfoController';\r\n\r\n    function setup() {\r\n        logger = debug.getLogger(instance);\r\n    }\r\n\r\n    function initialize() {\r\n        type = streamProcessor.getType();\r\n        fragmentModel = streamProcessor.getFragmentModel();\r\n\r\n        started = false;\r\n        startTime = null;\r\n        startFragmentTime = null;\r\n    }\r\n\r\n    function start() {\r\n        if (started) return;\r\n\r\n        logger.debug('Start');\r\n\r\n        started = true;\r\n        index = 0;\r\n\r\n        loadNextFragmentInfo();\r\n    }\r\n\r\n    function stop() {\r\n        if (!started) return;\r\n\r\n        logger.debug('Stop');\r\n\r\n        clearTimeout(loadFragmentTimeout);\r\n        started = false;\r\n        startTime = null;\r\n        startFragmentTime = null;\r\n    }\r\n\r\n    function reset() {\r\n        stop();\r\n    }\r\n\r\n    function loadNextFragmentInfo() {\r\n        if (!started) return;\r\n\r\n        // Get last segment from SegmentTimeline\r\n        const representation = getCurrentRepresentation();\r\n        const manifest = representation.adaptation.period.mpd.manifest;\r\n        const adaptation = manifest.Period[representation.adaptation.period.index].AdaptationSet[representation.adaptation.index];\r\n        const segments = adaptation.SegmentTemplate.SegmentTimeline.S;\r\n        const segment = segments[segments.length - 1];\r\n\r\n        // logger.debug('Last fragment time: ' + (segment.t / adaptation.SegmentTemplate.timescale));\r\n\r\n        // Generate segment request\r\n        const request = getRequestForSegment(adaptation, representation, segment);\r\n\r\n        // Send segment request\r\n        requestFragment.call(this, request);\r\n    }\r\n\r\n    function getRequestForSegment(adaptation, representation, segment) {\r\n        let timescale = adaptation.SegmentTemplate.timescale;\r\n        let request = new FragmentRequest();\r\n\r\n        request.mediaType = type;\r\n        request.type = HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE;\r\n        // request.range = segment.mediaRange;\r\n        request.startTime = segment.t / timescale;\r\n        request.duration = segment.d / timescale;\r\n        request.timescale = timescale;\r\n        // request.availabilityStartTime = segment.availabilityStartTime;\r\n        // request.availabilityEndTime = segment.availabilityEndTime;\r\n        // request.wallStartTime = segment.wallStartTime;\r\n        request.quality = representation.index;\r\n        request.index = index++;\r\n        request.mediaInfo = streamProcessor.getMediaInfo();\r\n        request.adaptationIndex = representation.adaptation.index;\r\n        request.representationId = representation.id;\r\n        request.url = baseURLController.resolve(representation.path).url + adaptation.SegmentTemplate.media;\r\n        request.url = request.url.replace('$Bandwidth$', representation.bandwidth);\r\n        request.url = request.url.replace('$Time$', segment.tManifest ? segment.tManifest : segment.t);\r\n        request.url = request.url.replace('/Fragments(', '/FragmentInfo(');\r\n\r\n        return request;\r\n    }\r\n\r\n    function getCurrentRepresentation() {\r\n        const representationController = streamProcessor.getRepresentationController();\r\n        const representation = representationController.getCurrentRepresentation();\r\n        return representation;\r\n    }\r\n\r\n    function requestFragment(request) {\r\n        // logger.debug('Load FragmentInfo for time: ' + request.startTime);\r\n        if (streamProcessor.getFragmentModel().isFragmentLoadedOrPending(request)) {\r\n            // We may have reached end of timeline in case of start-over streams\r\n            logger.debug('End of timeline');\r\n            stop();\r\n            return;\r\n        }\r\n\r\n        fragmentModel.executeRequest(request);\r\n    }\r\n\r\n    function fragmentInfoLoaded (e) {\r\n        if (!started) return;\r\n\r\n        const request = e.request;\r\n        if (!e.response) {\r\n            logger.error('Load error', request.url);\r\n            return;\r\n        }\r\n\r\n        let deltaFragmentTime,\r\n            deltaTime,\r\n            delay;\r\n\r\n        // logger.debug('FragmentInfo loaded: ', request.url);\r\n\r\n        if (startTime === null) {\r\n            startTime = new Date().getTime();\r\n        }\r\n\r\n        if (!startFragmentTime) {\r\n            startFragmentTime = request.startTime;\r\n        }\r\n\r\n        // Determine delay before requesting next FragmentInfo\r\n        deltaTime = (new Date().getTime() - startTime) / 1000;\r\n        deltaFragmentTime = (request.startTime + request.duration) - startFragmentTime;\r\n        delay = Math.max(0, (deltaFragmentTime - deltaTime));\r\n\r\n        // Set timeout for requesting next FragmentInfo\r\n        clearTimeout(loadFragmentTimeout);\r\n        loadFragmentTimeout = setTimeout(function () {\r\n            loadFragmentTimeout = null;\r\n            loadNextFragmentInfo();\r\n        }, delay * 1000);\r\n    }\r\n\r\n    function getType() {\r\n        return type;\r\n    }\r\n\r\n    instance = {\r\n        initialize: initialize,\r\n        controllerType: controllerType,\r\n        start: start,\r\n        fragmentInfoLoaded: fragmentInfoLoaded,\r\n        getType: getType,\r\n        reset: reset\r\n    };\r\n\r\n    setup();\r\n\r\n    return instance;\r\n}\r\n\r\nMssFragmentInfoController.__dashjs_factory_name = 'MssFragmentInfoController';\r\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentInfoController); /* jshint ignore:line */\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\nimport DashJSError from '../streaming/vo/DashJSError.js';\r\nimport MssErrors from './errors/MssErrors.js';\r\n\r\nimport Events from '../streaming/MediaPlayerEvents.js';\r\n\r\n/**\r\n * @module MssFragmentMoofProcessor\r\n * @ignore\r\n * @param {Object} config object\r\n */\r\nfunction MssFragmentMoofProcessor(config) {\r\n\r\n    config = config || {};\r\n    let instance,\r\n        type,\r\n        logger;\r\n    const dashMetrics = config.dashMetrics;\r\n    const playbackController = config.playbackController;\r\n    const errorHandler = config.errHandler;\r\n    const eventBus = config.eventBus;\r\n    const ISOBoxer = config.ISOBoxer;\r\n    const debug = config.debug;\r\n\r\n    function setup() {\r\n        logger = debug.getLogger(instance);\r\n        type = '';\r\n    }\r\n\r\n    function processTfrf(request, tfrf, tfdt, streamProcessor) {\r\n        const representationController = streamProcessor.getRepresentationController();\r\n        const representation = representationController.getCurrentRepresentation();\r\n\r\n        const manifest = representation.adaptation.period.mpd.manifest;\r\n        const adaptation = manifest.Period[representation.adaptation.period.index].AdaptationSet[representation.adaptation.index];\r\n        const timescale = adaptation.SegmentTemplate.timescale;\r\n\r\n        type = streamProcessor.getType();\r\n\r\n        // Process tfrf only for live streams or start-over static streams (timeShiftBufferDepth > 0)\r\n        if (manifest.type !== 'dynamic' && !manifest.timeShiftBufferDepth) {\r\n            return;\r\n        }\r\n\r\n        if (!tfrf) {\r\n            errorHandler.error(new DashJSError(MssErrors.MSS_NO_TFRF_CODE, MssErrors.MSS_NO_TFRF_MESSAGE));\r\n            return;\r\n        }\r\n\r\n        // Get adaptation's segment timeline (always a SegmentTimeline in Smooth Streaming use case)\r\n        const segments = adaptation.SegmentTemplate.SegmentTimeline.S;\r\n        const entries = tfrf.entry;\r\n        let entry,\r\n            segmentTime,\r\n            range;\r\n        let segment = null;\r\n        let t = 0;\r\n        let endTime;\r\n        let availabilityStartTime = null;\r\n\r\n        if (entries.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Consider only first tfrf entry (to avoid pre-condition failure on fragment info requests)\r\n        entry = entries[0];\r\n\r\n        // In case of start-over streams, check if we have reached end of original manifest duration (set in timeShiftBufferDepth)\r\n        // => then do not update anymore timeline\r\n        if (manifest.type === 'static') {\r\n            // Get first segment time\r\n            segmentTime = segments[0].tManifest ? parseFloat(segments[0].tManifest) : segments[0].t;\r\n            if (entry.fragment_absolute_time > (segmentTime + (manifest.timeShiftBufferDepth * timescale))) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // logger.debug('entry - t = ', (entry.fragment_absolute_time / timescale));\r\n\r\n        // Get last segment time\r\n        segmentTime = segments[segments.length - 1].tManifest ? parseFloat(segments[segments.length - 1].tManifest) : segments[segments.length - 1].t;\r\n        // logger.debug('Last segment - t = ', (segmentTime / timescale));\r\n\r\n        // Check if we have to append new segment to timeline\r\n        if (entry.fragment_absolute_time <= segmentTime) {\r\n            // Update DVR window range => set range end to end time of current segment\r\n            range = {\r\n                start: segments[0].t / timescale,\r\n                end: (tfdt.baseMediaDecodeTime / timescale) + request.duration\r\n            };\r\n\r\n            updateDVR(request.mediaType, range, streamProcessor.getStreamInfo().manifestInfo);\r\n            return;\r\n        }\r\n\r\n        // logger.debug('Add new segment - t = ', (entry.fragment_absolute_time / timescale));\r\n        segment = {};\r\n        segment.t = entry.fragment_absolute_time;\r\n        segment.d = entry.fragment_duration;\r\n        // If timestamps starts at 0 relative to 1st segment (dynamic to static) then update segment time\r\n        if (segments[0].tManifest) {\r\n            segment.t -= parseFloat(segments[0].tManifest) - segments[0].t;\r\n            segment.tManifest = entry.fragment_absolute_time;\r\n        }\r\n\r\n        // Patch previous segment duration\r\n        let lastSegment = segments[segments.length - 1];\r\n        if (lastSegment.t + lastSegment.d !== segment.t) {\r\n            logger.debug('Patch segment duration - t = ', lastSegment.t + ', d = ' + lastSegment.d + ' => ' + (segment.t - lastSegment.t));\r\n            lastSegment.d = segment.t - lastSegment.t;\r\n        }\r\n\r\n        segments.push(segment);\r\n\r\n        // In case of static start-over streams, update content duration\r\n        if (manifest.type === 'static') {\r\n            if (type === 'video') {\r\n                segment = segments[segments.length - 1];\r\n                endTime = (segment.t + segment.d) / timescale;\r\n                if (endTime > representation.adaptation.period.duration) {\r\n                    eventBus.trigger(Events.MANIFEST_VALIDITY_CHANGED, { sender: this, newDuration: endTime });\r\n                }\r\n            }\r\n            return;\r\n        } else {\r\n            // In case of live streams, update segment timeline according to DVR window\r\n            if (manifest.timeShiftBufferDepth && manifest.timeShiftBufferDepth > 0) {\r\n                // Get timestamp of the last segment\r\n                segment = segments[segments.length - 1];\r\n                t = segment.t;\r\n\r\n                // Determine the segments' availability start time\r\n                availabilityStartTime = (t - (manifest.timeShiftBufferDepth * timescale)) / timescale;\r\n\r\n                // Remove segments prior to availability start time\r\n                segment = segments[0];\r\n                endTime = (segment.t + segment.d) / timescale;\r\n                while (endTime < availabilityStartTime) {\r\n                    // Check if not currently playing the segment to be removed\r\n                    if (!playbackController.isPaused() && playbackController.getTime() < endTime) {\r\n                        break;\r\n                    }\r\n                    // logger.debug('Remove segment  - t = ' + (segment.t / timescale));\r\n                    segments.splice(0, 1);\r\n                    segment = segments[0];\r\n                    endTime = (segment.t + segment.d) / timescale;\r\n                }\r\n            }\r\n\r\n            // Update DVR window range => set range end to end time of current segment\r\n            range = {\r\n                start: segments[0].t / timescale,\r\n                end: (tfdt.baseMediaDecodeTime / timescale) + request.duration\r\n            };\r\n\r\n            updateDVR(type, range, streamProcessor.getStreamInfo().manifestInfo);\r\n        }\r\n\r\n    }\r\n\r\n    function updateDVR(type, range, manifestInfo) {\r\n        if (type !== 'video' && type !== 'audio') return;\r\n        const dvrInfos = dashMetrics.getCurrentDVRInfo(type);\r\n        if (!dvrInfos || (range.end > dvrInfos.range.end)) {\r\n            logger.debug('Update DVR range: [' + range.start + ' - ' + range.end + ']');\r\n            dashMetrics.addDVRInfo(type, playbackController.getTime(), manifestInfo, range);\r\n            playbackController.updateCurrentTime(type);\r\n        }\r\n    }\r\n\r\n    // This function returns the offset of the 1st byte of a child box within a container box\r\n    function getBoxOffset(parent, type) {\r\n        let offset = 8;\r\n        let i = 0;\r\n\r\n        for (i = 0; i < parent.boxes.length; i++) {\r\n            if (parent.boxes[i].type === type) {\r\n                return offset;\r\n            }\r\n            offset += parent.boxes[i].size;\r\n        }\r\n        return offset;\r\n    }\r\n\r\n    function convertFragment(e, streamProcessor) {\r\n        let i;\r\n\r\n        // e.request contains request description object\r\n        // e.response contains fragment bytes\r\n        const isoFile = ISOBoxer.parseBuffer(e.response);\r\n        // Update track_Id in tfhd box\r\n        const tfhd = isoFile.fetch('tfhd');\r\n        tfhd.track_ID = e.request.mediaInfo.index + 1;\r\n\r\n        // Add tfdt box\r\n        let tfdt = isoFile.fetch('tfdt');\r\n        const traf = isoFile.fetch('traf');\r\n        if (tfdt === null) {\r\n            tfdt = ISOBoxer.createFullBox('tfdt', traf, tfhd);\r\n            tfdt.version = 1;\r\n            tfdt.flags = 0;\r\n            tfdt.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale);\r\n        }\r\n\r\n        const trun = isoFile.fetch('trun');\r\n\r\n        // Process tfxd boxes\r\n        // This box provide absolute timestamp but we take the segment start time for tfdt\r\n        let tfxd = isoFile.fetch('tfxd');\r\n        if (tfxd) {\r\n            tfxd._parent.boxes.splice(tfxd._parent.boxes.indexOf(tfxd), 1);\r\n            tfxd = null;\r\n        }\r\n        let tfrf = isoFile.fetch('tfrf');\r\n        processTfrf(e.request, tfrf, tfdt, streamProcessor);\r\n        if (tfrf) {\r\n            tfrf._parent.boxes.splice(tfrf._parent.boxes.indexOf(tfrf), 1);\r\n            tfrf = null;\r\n        }\r\n\r\n        // If protected content in PIFF1.1 format (sepiff box = Sample Encryption PIFF)\r\n        // => convert sepiff box it into a senc box\r\n        // => create saio and saiz boxes (if not already present)\r\n        const sepiff = isoFile.fetch('sepiff');\r\n        if (sepiff !== null) {\r\n            sepiff.type = 'senc';\r\n            sepiff.usertype = undefined;\r\n\r\n            let saio = isoFile.fetch('saio');\r\n            if (saio === null) {\r\n                // Create Sample Auxiliary Information Offsets Box box (saio)\r\n                saio = ISOBoxer.createFullBox('saio', traf);\r\n                saio.version = 0;\r\n                saio.flags = 0;\r\n                saio.entry_count = 1;\r\n                saio.offset = [0];\r\n\r\n                const saiz = ISOBoxer.createFullBox('saiz', traf);\r\n                saiz.version = 0;\r\n                saiz.flags = 0;\r\n                saiz.sample_count = sepiff.sample_count;\r\n                saiz.default_sample_info_size = 0;\r\n                saiz.sample_info_size = [];\r\n\r\n                if (sepiff.flags & 0x02) {\r\n                    // Sub-sample encryption => set sample_info_size for each sample\r\n                    for (i = 0; i < sepiff.sample_count; i += 1) {\r\n                        // 10 = 8 (InitializationVector field size) + 2 (subsample_count field size)\r\n                        // 6 = 2 (BytesOfClearData field size) + 4 (BytesOfEncryptedData field size)\r\n                        saiz.sample_info_size[i] = 10 + (6 * sepiff.entry[i].NumberOfEntries);\r\n                    }\r\n                } else {\r\n                    // No sub-sample encryption => set default sample_info_size = InitializationVector field size (8)\r\n                    saiz.default_sample_info_size = 8;\r\n                }\r\n            }\r\n        }\r\n\r\n        tfhd.flags &= 0xFFFFFE; // set tfhd.base-data-offset-present to false\r\n        tfhd.flags |= 0x020000; // set tfhd.default-base-is-moof to true\r\n        trun.flags |= 0x000001; // set trun.data-offset-present to true\r\n\r\n        // Update trun.data_offset field that corresponds to first data byte (inside mdat box)\r\n        const moof = isoFile.fetch('moof');\r\n        let length = moof.getLength();\r\n        trun.data_offset = length + 8;\r\n\r\n        // Update saio box offset field according to new senc box offset\r\n        let saio = isoFile.fetch('saio');\r\n        if (saio !== null) {\r\n            let trafPosInMoof = getBoxOffset(moof, 'traf');\r\n            let sencPosInTraf = getBoxOffset(traf, 'senc');\r\n            // Set offset from begin fragment to the first IV field in senc box\r\n            saio.offset[0] = trafPosInMoof + sencPosInTraf + 16; // 16 = box header (12) + sample_count field size (4)\r\n        }\r\n\r\n        // Write transformed/processed fragment into request reponse data\r\n        e.response = isoFile.write();\r\n    }\r\n\r\n    function updateSegmentList(e, streamProcessor) {\r\n        // e.request contains request description object\r\n        // e.response contains fragment bytes\r\n        if (!e.response) {\r\n            throw new Error('e.response parameter is missing');\r\n        }\r\n\r\n        const isoFile = ISOBoxer.parseBuffer(e.response);\r\n        // Update track_Id in tfhd box\r\n        const tfhd = isoFile.fetch('tfhd');\r\n        tfhd.track_ID = e.request.mediaInfo.index + 1;\r\n\r\n        // Add tfdt box\r\n        let tfdt = isoFile.fetch('tfdt');\r\n        let traf = isoFile.fetch('traf');\r\n        if (tfdt === null) {\r\n            tfdt = ISOBoxer.createFullBox('tfdt', traf, tfhd);\r\n            tfdt.version = 1;\r\n            tfdt.flags = 0;\r\n            tfdt.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale);\r\n        }\r\n\r\n        let tfrf = isoFile.fetch('tfrf');\r\n        processTfrf(e.request, tfrf, tfdt, streamProcessor);\r\n        if (tfrf) {\r\n            tfrf._parent.boxes.splice(tfrf._parent.boxes.indexOf(tfrf), 1);\r\n            tfrf = null;\r\n        }\r\n    }\r\n\r\n    function getType() {\r\n        return type;\r\n    }\r\n\r\n    instance = {\r\n        convertFragment: convertFragment,\r\n        updateSegmentList: updateSegmentList,\r\n        getType: getType\r\n    };\r\n\r\n    setup();\r\n    return instance;\r\n}\r\n\r\nMssFragmentMoofProcessor.__dashjs_factory_name = 'MssFragmentMoofProcessor';\r\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentMoofProcessor); /* jshint ignore:line */\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\nimport MssErrors from './errors/MssErrors.js';\r\n\r\n/**\r\n * @module MssFragmentMoovProcessor\r\n * @ignore\r\n * @param {Object} config object\r\n */\r\nfunction MssFragmentMoovProcessor(config) {\r\n    config = config || {};\r\n    const NALUTYPE_SPS = 7;\r\n    const NALUTYPE_PPS = 8;\r\n    const constants = config.constants;\r\n    const ISOBoxer = config.ISOBoxer;\r\n\r\n    let protectionController = config.protectionController;\r\n    let instance,\r\n        period,\r\n        adaptationSet,\r\n        representation,\r\n        contentProtection,\r\n        timescale,\r\n        trackId;\r\n\r\n    function createFtypBox(isoFile) {\r\n        let ftyp = ISOBoxer.createBox('ftyp', isoFile);\r\n        ftyp.major_brand = 'iso6';\r\n        ftyp.minor_version = 1; // is an informative integer for the minor version of the major brand\r\n        ftyp.compatible_brands = []; //is a list, to the end of the box, of brands isom, iso6 and msdh\r\n        ftyp.compatible_brands[0] = 'isom'; // => decimal ASCII value for isom\r\n        ftyp.compatible_brands[1] = 'iso6'; // => decimal ASCII value for iso6\r\n        ftyp.compatible_brands[2] = 'msdh'; // => decimal ASCII value for msdh\r\n\r\n        return ftyp;\r\n    }\r\n\r\n    function createMoovBox(isoFile) {\r\n\r\n        // moov box\r\n        let moov = ISOBoxer.createBox('moov', isoFile);\r\n\r\n        // moov/mvhd\r\n        createMvhdBox(moov);\r\n\r\n        // moov/trak\r\n        let trak = ISOBoxer.createBox('trak', moov);\r\n\r\n        // moov/trak/tkhd\r\n        createTkhdBox(trak);\r\n\r\n        // moov/trak/mdia\r\n        let mdia = ISOBoxer.createBox('mdia', trak);\r\n\r\n        // moov/trak/mdia/mdhd\r\n        createMdhdBox(mdia);\r\n\r\n        // moov/trak/mdia/hdlr\r\n        createHdlrBox(mdia);\r\n\r\n        // moov/trak/mdia/minf\r\n        let minf = ISOBoxer.createBox('minf', mdia);\r\n\r\n        switch (adaptationSet.type) {\r\n            case constants.VIDEO:\r\n                // moov/trak/mdia/minf/vmhd\r\n                createVmhdBox(minf);\r\n                break;\r\n            case constants.AUDIO:\r\n                // moov/trak/mdia/minf/smhd\r\n                createSmhdBox(minf);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // moov/trak/mdia/minf/dinf\r\n        let dinf = ISOBoxer.createBox('dinf', minf);\r\n\r\n        // moov/trak/mdia/minf/dinf/dref\r\n        createDrefBox(dinf);\r\n\r\n        // moov/trak/mdia/minf/stbl\r\n        let stbl = ISOBoxer.createBox('stbl', minf);\r\n\r\n        // Create empty stts, stsc, stco and stsz boxes\r\n        // Use data field as for codem-isoboxer unknown boxes for setting fields value\r\n\r\n        // moov/trak/mdia/minf/stbl/stts\r\n        let stts = ISOBoxer.createFullBox('stts', stbl);\r\n        stts._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\r\n\r\n        // moov/trak/mdia/minf/stbl/stsc\r\n        let stsc = ISOBoxer.createFullBox('stsc', stbl);\r\n        stsc._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\r\n\r\n        // moov/trak/mdia/minf/stbl/stco\r\n        let stco = ISOBoxer.createFullBox('stco', stbl);\r\n        stco._data = [0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, entry_count = 0\r\n\r\n        // moov/trak/mdia/minf/stbl/stsz\r\n        let stsz = ISOBoxer.createFullBox('stsz', stbl);\r\n        stsz._data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; // version = 0, flags = 0, sample_size = 0, sample_count = 0\r\n\r\n        // moov/trak/mdia/minf/stbl/stsd\r\n        createStsdBox(stbl);\r\n\r\n        // moov/mvex\r\n        let mvex = ISOBoxer.createBox('mvex', moov);\r\n\r\n        // moov/mvex/trex\r\n        createTrexBox(mvex);\r\n\r\n        if (contentProtection && protectionController) {\r\n            let supportedKS = protectionController.getSupportedKeySystemsFromContentProtection(contentProtection);\r\n            createProtectionSystemSpecificHeaderBox(moov, supportedKS);\r\n        }\r\n    }\r\n\r\n    function createMvhdBox(moov) {\r\n\r\n        let mvhd = ISOBoxer.createFullBox('mvhd', moov);\r\n\r\n        mvhd.version = 1; // version = 1  in order to have 64bits duration value\r\n\r\n        mvhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\r\n        mvhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\r\n        mvhd.timescale = timescale; // the time-scale for the entire presentation => 10000000 for MSS\r\n        mvhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the length of the presentation (in the indicated timescale) =>  take duration of period\r\n        mvhd.rate = 1.0; // 16.16 number, '1.0' = normal playback\r\n        mvhd.volume = 1.0; // 8.8 number, '1.0' = full volume\r\n        mvhd.reserved1 = 0;\r\n        mvhd.reserved2 = [0x0, 0x0];\r\n        mvhd.matrix = [\r\n            1, 0, 0, // provides a transformation matrix for the video;\r\n            0, 1, 0, // (u,v,w) are restricted here to (0,0,1)\r\n            0, 0, 16384\r\n        ];\r\n        mvhd.pre_defined = [0, 0, 0, 0, 0, 0];\r\n        mvhd.next_track_ID = trackId + 1; // indicates a value to use for the track ID of the next track to be added to this presentation\r\n\r\n        return mvhd;\r\n    }\r\n\r\n    function createTkhdBox(trak) {\r\n\r\n        let tkhd = ISOBoxer.createFullBox('tkhd', trak);\r\n\r\n        tkhd.version = 1; // version = 1  in order to have 64bits duration value\r\n        tkhd.flags = 0x1 | // Track_enabled (0x000001): Indicates that the track is enabled\r\n            0x2 | // Track_in_movie (0x000002):  Indicates that the track is used in the presentation\r\n            0x4; // Track_in_preview (0x000004):  Indicates that the track is used when previewing the presentation\r\n\r\n        tkhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\r\n        tkhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\r\n        tkhd.track_ID = trackId; // uniquely identifies this track over the entire life-time of this presentation\r\n        tkhd.reserved1 = 0;\r\n        tkhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the duration of this track (in the timescale indicated in the Movie Header Box) =>  take duration of period\r\n        tkhd.reserved2 = [0x0, 0x0];\r\n        tkhd.layer = 0; // specifies the front-to-back ordering of video tracks; tracks with lower numbers are closer to the viewer => 0 since only one video track\r\n        tkhd.alternate_group = 0; // specifies a group or collection of tracks => ignore\r\n        tkhd.volume = 1.0; // '1.0' = full volume\r\n        tkhd.reserved3 = 0;\r\n        tkhd.matrix = [\r\n            1, 0, 0, // provides a transformation matrix for the video;\r\n            0, 1, 0, // (u,v,w) are restricted here to (0,0,1)\r\n            0, 0, 16384\r\n        ];\r\n        tkhd.width = representation.width; // visual presentation width\r\n        tkhd.height = representation.height; // visual presentation height\r\n\r\n        return tkhd;\r\n    }\r\n\r\n    function createMdhdBox(mdia) {\r\n\r\n        let mdhd = ISOBoxer.createFullBox('mdhd', mdia);\r\n\r\n        mdhd.version = 1; // version = 1  in order to have 64bits duration value\r\n\r\n        mdhd.creation_time = 0; // the creation time of the presentation => ignore (set to 0)\r\n        mdhd.modification_time = 0; // the most recent time the presentation was modified => ignore (set to 0)\r\n        mdhd.timescale = timescale; // the time-scale for the entire presentation\r\n        mdhd.duration = period.duration === Infinity ? 0xFFFFFFFFFFFFFFFF : Math.round(period.duration * timescale); // the duration of this media (in the scale of the timescale). If the duration cannot be determined then duration is set to all 1s.\r\n        mdhd.language = adaptationSet.lang || 'und'; // declares the language code for this media\r\n        mdhd.pre_defined = 0;\r\n\r\n        return mdhd;\r\n    }\r\n\r\n    function createHdlrBox(mdia) {\r\n\r\n        let hdlr = ISOBoxer.createFullBox('hdlr', mdia);\r\n\r\n        hdlr.pre_defined = 0;\r\n        switch (adaptationSet.type) {\r\n            case constants.VIDEO:\r\n                hdlr.handler_type = 'vide';\r\n                break;\r\n            case constants.AUDIO:\r\n                hdlr.handler_type = 'soun';\r\n                break;\r\n            default:\r\n                hdlr.handler_type = 'meta';\r\n                break;\r\n        }\r\n        hdlr.name = representation.id;\r\n        hdlr.reserved = [0, 0, 0];\r\n\r\n        return hdlr;\r\n    }\r\n\r\n    function createVmhdBox(minf) {\r\n\r\n        let vmhd = ISOBoxer.createFullBox('vmhd', minf);\r\n\r\n        vmhd.flags = 1;\r\n\r\n        vmhd.graphicsmode = 0; // specifies a composition mode for this video track, from the following enumerated set, which may be extended by derived specifications: copy = 0 copy over the existing image\r\n        vmhd.opcolor = [0, 0, 0]; // is a set of 3 colour values (red, green, blue) available for use by graphics modes\r\n\r\n        return vmhd;\r\n    }\r\n\r\n    function createSmhdBox(minf) {\r\n\r\n        let smhd = ISOBoxer.createFullBox('smhd', minf);\r\n\r\n        smhd.flags = 1;\r\n\r\n        smhd.balance = 0; // is a fixed-point 8.8 number that places mono audio tracks in a stereo space; 0 is centre (the normal value); full left is -1.0 and full right is 1.0.\r\n        smhd.reserved = 0;\r\n\r\n        return smhd;\r\n    }\r\n\r\n    function createDrefBox(dinf) {\r\n\r\n        let dref = ISOBoxer.createFullBox('dref', dinf);\r\n\r\n        dref.entry_count = 1;\r\n        dref.entries = [];\r\n\r\n        let url = ISOBoxer.createFullBox('url ', dref, false);\r\n        url.location = '';\r\n        url.flags = 1;\r\n\r\n        dref.entries.push(url);\r\n\r\n        return dref;\r\n    }\r\n\r\n    function createStsdBox(stbl) {\r\n\r\n        let stsd = ISOBoxer.createFullBox('stsd', stbl);\r\n\r\n        stsd.entries = [];\r\n        switch (adaptationSet.type) {\r\n            case constants.VIDEO:\r\n            case constants.AUDIO:\r\n                stsd.entries.push(createSampleEntry(stsd));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        stsd.entry_count = stsd.entries.length; // is an integer that counts the actual entries\r\n        return stsd;\r\n    }\r\n\r\n    function createSampleEntry(stsd) {\r\n        let codec = representation.codecs.substring(0, representation.codecs.indexOf('.'));\r\n\r\n        switch (codec) {\r\n            case 'avc1':\r\n                return createAVCVisualSampleEntry(stsd, codec);\r\n            case 'mp4a':\r\n                return createMP4AudioSampleEntry(stsd, codec);\r\n            default:\r\n                throw {\r\n                    code: MssErrors.MSS_UNSUPPORTED_CODEC_CODE,\r\n                    message: MssErrors.MSS_UNSUPPORTED_CODEC_MESSAGE,\r\n                    data: {\r\n                        codec: codec\r\n                    }\r\n                };\r\n        }\r\n    }\r\n\r\n    function createAVCVisualSampleEntry(stsd, codec) {\r\n        let avc1;\r\n\r\n        if (contentProtection) {\r\n            avc1 = ISOBoxer.createBox('encv', stsd, false);\r\n        } else {\r\n            avc1 = ISOBoxer.createBox('avc1', stsd, false);\r\n        }\r\n\r\n        // SampleEntry fields\r\n        avc1.reserved1 = [0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\r\n        avc1.data_reference_index = 1;\r\n\r\n        // VisualSampleEntry fields\r\n        avc1.pre_defined1 = 0;\r\n        avc1.reserved2 = 0;\r\n        avc1.pre_defined2 = [0, 0, 0];\r\n        avc1.height = representation.height;\r\n        avc1.width = representation.width;\r\n        avc1.horizresolution = 72; // 72 dpi\r\n        avc1.vertresolution = 72; // 72 dpi\r\n        avc1.reserved3 = 0;\r\n        avc1.frame_count = 1; // 1 compressed video frame per sample\r\n        avc1.compressorname = [\r\n            0x0A, 0x41, 0x56, 0x43, 0x20, 0x43, 0x6F, 0x64, // = 'AVC Coding';\r\n            0x69, 0x6E, 0x67, 0x00, 0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00\r\n        ];\r\n        avc1.depth = 0x0018; // 0x0018  images are in colour with no alpha.\r\n        avc1.pre_defined3 = 65535;\r\n        avc1.config = createAVC1ConfigurationRecord();\r\n        if (contentProtection) {\r\n            // Create and add Protection Scheme Info Box\r\n            let sinf = ISOBoxer.createBox('sinf', avc1);\r\n\r\n            // Create and add Original Format Box => indicate codec type of the encrypted content\r\n            createOriginalFormatBox(sinf, codec);\r\n\r\n            // Create and add Scheme Type box\r\n            createSchemeTypeBox(sinf);\r\n\r\n            // Create and add Scheme Information Box\r\n            createSchemeInformationBox(sinf);\r\n        }\r\n\r\n        return avc1;\r\n    }\r\n\r\n    function createAVC1ConfigurationRecord() {\r\n\r\n        let avcC = null;\r\n        let avcCLength = 15; // length = 15 by default (0 SPS and 0 PPS)\r\n\r\n        // First get all SPS and PPS from codecPrivateData\r\n        let sps = [];\r\n        let pps = [];\r\n        let AVCProfileIndication = 0;\r\n        let AVCLevelIndication = 0;\r\n        let profile_compatibility = 0;\r\n\r\n        let nalus = representation.codecPrivateData.split('00000001').slice(1);\r\n        let naluBytes, naluType;\r\n\r\n        for (let i = 0; i < nalus.length; i++) {\r\n            naluBytes = hexStringtoBuffer(nalus[i]);\r\n\r\n            naluType = naluBytes[0] & 0x1F;\r\n\r\n            switch (naluType) {\r\n                case NALUTYPE_SPS:\r\n                    sps.push(naluBytes);\r\n                    avcCLength += naluBytes.length + 2; // 2 = sequenceParameterSetLength field length\r\n                    break;\r\n                case NALUTYPE_PPS:\r\n                    pps.push(naluBytes);\r\n                    avcCLength += naluBytes.length + 2; // 2 = pictureParameterSetLength field length\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        // Get profile and level from SPS\r\n        if (sps.length > 0) {\r\n            AVCProfileIndication = sps[0][1];\r\n            profile_compatibility = sps[0][2];\r\n            AVCLevelIndication = sps[0][3];\r\n        }\r\n\r\n        // Generate avcC buffer\r\n        avcC = new Uint8Array(avcCLength);\r\n\r\n        let i = 0;\r\n        // length\r\n        avcC[i++] = (avcCLength & 0xFF000000) >> 24;\r\n        avcC[i++] = (avcCLength & 0x00FF0000) >> 16;\r\n        avcC[i++] = (avcCLength & 0x0000FF00) >> 8;\r\n        avcC[i++] = (avcCLength & 0x000000FF);\r\n        avcC.set([0x61, 0x76, 0x63, 0x43], i); // type = 'avcC'\r\n        i += 4;\r\n        avcC[i++] = 1; // configurationVersion = 1\r\n        avcC[i++] = AVCProfileIndication;\r\n        avcC[i++] = profile_compatibility;\r\n        avcC[i++] = AVCLevelIndication;\r\n        avcC[i++] = 0xFF; // '11111' + lengthSizeMinusOne = 3\r\n        avcC[i++] = 0xE0 | sps.length; // '111' + numOfSequenceParameterSets\r\n        for (let n = 0; n < sps.length; n++) {\r\n            avcC[i++] = (sps[n].length & 0xFF00) >> 8;\r\n            avcC[i++] = (sps[n].length & 0x00FF);\r\n            avcC.set(sps[n], i);\r\n            i += sps[n].length;\r\n        }\r\n        avcC[i++] = pps.length; // numOfPictureParameterSets\r\n        for (let n = 0; n < pps.length; n++) {\r\n            avcC[i++] = (pps[n].length & 0xFF00) >> 8;\r\n            avcC[i++] = (pps[n].length & 0x00FF);\r\n            avcC.set(pps[n], i);\r\n            i += pps[n].length;\r\n        }\r\n\r\n        return avcC;\r\n    }\r\n\r\n    function createMP4AudioSampleEntry(stsd, codec) {\r\n        let mp4a;\r\n\r\n        if (contentProtection) {\r\n            mp4a = ISOBoxer.createBox('enca', stsd, false);\r\n        } else {\r\n            mp4a = ISOBoxer.createBox('mp4a', stsd, false);\r\n        }\r\n\r\n        // SampleEntry fields\r\n        mp4a.reserved1 = [0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\r\n        mp4a.data_reference_index = 1;\r\n\r\n        // AudioSampleEntry fields\r\n        mp4a.reserved2 = [0x0, 0x0];\r\n        mp4a.channelcount = representation.audioChannels;\r\n        mp4a.samplesize = 16;\r\n        mp4a.pre_defined = 0;\r\n        mp4a.reserved_3 = 0;\r\n        mp4a.samplerate = representation.audioSamplingRate << 16;\r\n\r\n        mp4a.esds = createMPEG4AACESDescriptor();\r\n\r\n        if (contentProtection) {\r\n            // Create and add Protection Scheme Info Box\r\n            let sinf = ISOBoxer.createBox('sinf', mp4a);\r\n\r\n            // Create and add Original Format Box => indicate codec type of the encrypted content\r\n            createOriginalFormatBox(sinf, codec);\r\n\r\n            // Create and add Scheme Type box\r\n            createSchemeTypeBox(sinf);\r\n\r\n            // Create and add Scheme Information Box\r\n            createSchemeInformationBox(sinf);\r\n        }\r\n\r\n        return mp4a;\r\n    }\r\n\r\n    function createMPEG4AACESDescriptor() {\r\n\r\n        // AudioSpecificConfig (see ISO/IEC 14496-3, subpart 1) => corresponds to hex bytes contained in 'codecPrivateData' field\r\n        let audioSpecificConfig = hexStringtoBuffer(representation.codecPrivateData);\r\n\r\n        // ESDS length = esds box header length (= 12) +\r\n        //               ES_Descriptor header length (= 5) +\r\n        //               DecoderConfigDescriptor header length (= 15) +\r\n        //               decoderSpecificInfo header length (= 2) +\r\n        //               AudioSpecificConfig length (= codecPrivateData length)\r\n        let esdsLength = 34 + audioSpecificConfig.length;\r\n        let esds = new Uint8Array(esdsLength);\r\n\r\n        let i = 0;\r\n        // esds box\r\n        esds[i++] = (esdsLength & 0xFF000000) >> 24; // esds box length\r\n        esds[i++] = (esdsLength & 0x00FF0000) >> 16; // ''\r\n        esds[i++] = (esdsLength & 0x0000FF00) >> 8; // ''\r\n        esds[i++] = (esdsLength & 0x000000FF); // ''\r\n        esds.set([0x65, 0x73, 0x64, 0x73], i); // type = 'esds'\r\n        i += 4;\r\n        esds.set([0, 0, 0, 0], i); // version = 0, flags = 0\r\n        i += 4;\r\n        // ES_Descriptor (see ISO/IEC 14496-1 (Systems))\r\n        esds[i++] = 0x03; // tag = 0x03 (ES_DescrTag)\r\n        esds[i++] = 20 + audioSpecificConfig.length; // size\r\n        esds[i++] = (trackId & 0xFF00) >> 8; // ES_ID = track_id\r\n        esds[i++] = (trackId & 0x00FF); // ''\r\n        esds[i++] = 0; // flags and streamPriority\r\n\r\n        // DecoderConfigDescriptor (see ISO/IEC 14496-1 (Systems))\r\n        esds[i++] = 0x04; // tag = 0x04 (DecoderConfigDescrTag)\r\n        esds[i++] = 15 + audioSpecificConfig.length; // size\r\n        esds[i++] = 0x40; // objectTypeIndication = 0x40 (MPEG-4 AAC)\r\n        esds[i] = 0x05 << 2; // streamType = 0x05 (Audiostream)\r\n        esds[i] |= 0 << 1; // upStream = 0\r\n        esds[i++] |= 1; // reserved = 1\r\n        esds[i++] = 0xFF; // buffersizeDB = undefined\r\n        esds[i++] = 0xFF; // ''\r\n        esds[i++] = 0xFF; // ''\r\n        esds[i++] = (representation.bandwidth & 0xFF000000) >> 24; // maxBitrate\r\n        esds[i++] = (representation.bandwidth & 0x00FF0000) >> 16; // ''\r\n        esds[i++] = (representation.bandwidth & 0x0000FF00) >> 8; // ''\r\n        esds[i++] = (representation.bandwidth & 0x000000FF); // ''\r\n        esds[i++] = (representation.bandwidth & 0xFF000000) >> 24; // avgbitrate\r\n        esds[i++] = (representation.bandwidth & 0x00FF0000) >> 16; // ''\r\n        esds[i++] = (representation.bandwidth & 0x0000FF00) >> 8; // ''\r\n        esds[i++] = (representation.bandwidth & 0x000000FF); // ''\r\n\r\n        // DecoderSpecificInfo (see ISO/IEC 14496-1 (Systems))\r\n        esds[i++] = 0x05; // tag = 0x05 (DecSpecificInfoTag)\r\n        esds[i++] = audioSpecificConfig.length; // size\r\n        esds.set(audioSpecificConfig, i); // AudioSpecificConfig bytes\r\n\r\n        return esds;\r\n    }\r\n\r\n    function createOriginalFormatBox(sinf, codec) {\r\n        let frma = ISOBoxer.createBox('frma', sinf);\r\n        frma.data_format = stringToCharCode(codec);\r\n    }\r\n\r\n    function createSchemeTypeBox(sinf) {\r\n        let schm = ISOBoxer.createFullBox('schm', sinf);\r\n\r\n        schm.flags = 0;\r\n        schm.version = 0;\r\n        schm.scheme_type = 0x63656E63; // 'cenc' => common encryption\r\n        schm.scheme_version = 0x00010000; // version set to 0x00010000 (Major version 1, Minor version 0)\r\n    }\r\n\r\n    function createSchemeInformationBox(sinf) {\r\n        let schi = ISOBoxer.createBox('schi', sinf);\r\n\r\n        // Create and add Track Encryption Box\r\n        createTrackEncryptionBox(schi);\r\n    }\r\n\r\n    function createProtectionSystemSpecificHeaderBox(moov, keySystems) {\r\n        let pssh_bytes,\r\n            pssh,\r\n            i,\r\n            parsedBuffer;\r\n\r\n        for (i = 0; i < keySystems.length; i += 1) {\r\n            pssh_bytes = keySystems[i].initData;\r\n            if (pssh_bytes) {\r\n                parsedBuffer = ISOBoxer.parseBuffer(pssh_bytes);\r\n                pssh = parsedBuffer.fetch('pssh');\r\n                if (pssh) {\r\n                    ISOBoxer.Utils.appendBox(moov, pssh);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function createTrackEncryptionBox(schi) {\r\n        let tenc = ISOBoxer.createFullBox('tenc', schi);\r\n\r\n        tenc.flags = 0;\r\n        tenc.version = 0;\r\n\r\n        tenc.default_IsEncrypted = 0x1;\r\n        tenc.default_IV_size = 8;\r\n        tenc.default_KID = (contentProtection && (contentProtection.length) > 0 && contentProtection[0]['cenc:default_KID']) ?\r\n            contentProtection[0]['cenc:default_KID'] : [0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0];\r\n    }\r\n\r\n    function createTrexBox(moov) {\r\n        let trex = ISOBoxer.createFullBox('trex', moov);\r\n\r\n        trex.track_ID = trackId;\r\n        trex.default_sample_description_index = 1;\r\n        trex.default_sample_duration = 0;\r\n        trex.default_sample_size = 0;\r\n        trex.default_sample_flags = 0;\r\n\r\n        return trex;\r\n    }\r\n\r\n    function hexStringtoBuffer(str) {\r\n        let buf = new Uint8Array(str.length / 2);\r\n        let i;\r\n\r\n        for (i = 0; i < str.length / 2; i += 1) {\r\n            buf[i] = parseInt('' + str[i * 2] + str[i * 2 + 1], 16);\r\n        }\r\n        return buf;\r\n    }\r\n\r\n    function stringToCharCode(str) {\r\n        let code = 0;\r\n        let i;\r\n\r\n        for (i = 0; i < str.length; i += 1) {\r\n            code |= str.charCodeAt(i) << ((str.length - i - 1) * 8);\r\n        }\r\n        return code;\r\n    }\r\n\r\n    function generateMoov(rep) {\r\n        if (!rep || !rep.adaptation) {\r\n            return;\r\n        }\r\n\r\n        let isoFile,\r\n            arrayBuffer;\r\n\r\n        representation = rep;\r\n        adaptationSet = representation.adaptation;\r\n\r\n        period = adaptationSet.period;\r\n        trackId = adaptationSet.index + 1;\r\n        contentProtection = period.mpd.manifest.Period[period.index].AdaptationSet[adaptationSet.index].ContentProtection;\r\n\r\n        timescale = period.mpd.manifest.Period[period.index].AdaptationSet[adaptationSet.index].SegmentTemplate.timescale;\r\n\r\n        isoFile = ISOBoxer.createFile();\r\n        createFtypBox(isoFile);\r\n        createMoovBox(isoFile);\r\n\r\n        arrayBuffer = isoFile.write();\r\n\r\n        return arrayBuffer;\r\n    }\r\n\r\n    instance = {\r\n        generateMoov: generateMoov\r\n    };\r\n\r\n    return instance;\r\n}\r\n\r\nMssFragmentMoovProcessor.__dashjs_factory_name = 'MssFragmentMoovProcessor';\r\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentMoovProcessor); /* jshint ignore:line */\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nimport MssFragmentMoofProcessor from './MssFragmentMoofProcessor.js';\r\nimport MssFragmentMoovProcessor from './MssFragmentMoovProcessor.js';\r\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest.js';\r\n\r\n\r\n// Add specific box processors not provided by codem-isoboxer library\r\n\r\nfunction arrayEqual(arr1, arr2) {\r\n    return (arr1.length === arr2.length) && arr1.every(function (element, index) {\r\n        return element === arr2[index];\r\n    });\r\n}\r\n\r\nfunction saioProcessor() {\r\n    this._procFullBox();\r\n    if (this.flags & 1) {\r\n        this._procField('aux_info_type', 'uint', 32);\r\n        this._procField('aux_info_type_parameter', 'uint', 32);\r\n    }\r\n    this._procField('entry_count', 'uint', 32);\r\n    this._procFieldArray('offset', this.entry_count, 'uint', (this.version === 1) ? 64 : 32);\r\n}\r\n\r\nfunction saizProcessor() {\r\n    this._procFullBox();\r\n    if (this.flags & 1) {\r\n        this._procField('aux_info_type', 'uint', 32);\r\n        this._procField('aux_info_type_parameter', 'uint', 32);\r\n    }\r\n    this._procField('default_sample_info_size', 'uint', 8);\r\n    this._procField('sample_count', 'uint', 32);\r\n    if (this.default_sample_info_size === 0) {\r\n        this._procFieldArray('sample_info_size', this.sample_count, 'uint', 8);\r\n    }\r\n}\r\n\r\nfunction sencProcessor() {\r\n    this._procFullBox();\r\n    this._procField('sample_count', 'uint', 32);\r\n    if (this.flags & 1) {\r\n        this._procField('IV_size', 'uint', 8);\r\n    }\r\n    this._procEntries('entry', this.sample_count, function (entry) {\r\n        this._procEntryField(entry, 'InitializationVector', 'data', 8);\r\n        if (this.flags & 2) {\r\n            this._procEntryField(entry, 'NumberOfEntries', 'uint', 16);\r\n            this._procSubEntries(entry, 'clearAndCryptedData', entry.NumberOfEntries, function (clearAndCryptedData) {\r\n                this._procEntryField(clearAndCryptedData, 'BytesOfClearData', 'uint', 16);\r\n                this._procEntryField(clearAndCryptedData, 'BytesOfEncryptedData', 'uint', 32);\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction uuidProcessor() {\r\n    let tfxdUserType = [0x6D, 0x1D, 0x9B, 0x05, 0x42, 0xD5, 0x44, 0xE6, 0x80, 0xE2, 0x14, 0x1D, 0xAF, 0xF7, 0x57, 0xB2];\r\n    let tfrfUserType = [0xD4, 0x80, 0x7E, 0xF2, 0xCA, 0x39, 0x46, 0x95, 0x8E, 0x54, 0x26, 0xCB, 0x9E, 0x46, 0xA7, 0x9F];\r\n    let sepiffUserType = [0xA2, 0x39, 0x4F, 0x52, 0x5A, 0x9B, 0x4f, 0x14, 0xA2, 0x44, 0x6C, 0x42, 0x7C, 0x64, 0x8D, 0xF4];\r\n\r\n    if (arrayEqual(this.usertype, tfxdUserType)) {\r\n        this._procFullBox();\r\n        if (this._parsing) {\r\n            this.type = 'tfxd';\r\n        }\r\n        this._procField('fragment_absolute_time', 'uint', (this.version === 1) ? 64 : 32);\r\n        this._procField('fragment_duration', 'uint', (this.version === 1) ? 64 : 32);\r\n    }\r\n\r\n    if (arrayEqual(this.usertype, tfrfUserType)) {\r\n        this._procFullBox();\r\n        if (this._parsing) {\r\n            this.type = 'tfrf';\r\n        }\r\n        this._procField('fragment_count', 'uint', 8);\r\n        this._procEntries('entry', this.fragment_count, function (entry) {\r\n            this._procEntryField(entry, 'fragment_absolute_time', 'uint', (this.version === 1) ? 64 : 32);\r\n            this._procEntryField(entry, 'fragment_duration', 'uint', (this.version === 1) ? 64 : 32);\r\n        });\r\n    }\r\n\r\n    if (arrayEqual(this.usertype, sepiffUserType)) {\r\n        if (this._parsing) {\r\n            this.type = 'sepiff';\r\n        }\r\n        sencProcessor.call(this);\r\n    }\r\n}\r\n\r\nfunction MssFragmentProcessor(config) {\r\n\r\n    config = config || {};\r\n    const context = this.context;\r\n    const dashMetrics = config.dashMetrics;\r\n    const playbackController = config.playbackController;\r\n    const eventBus = config.eventBus;\r\n    const protectionController = config.protectionController;\r\n    const ISOBoxer = config.ISOBoxer;\r\n    const debug = config.debug;\r\n    let mssFragmentMoovProcessor,\r\n        mssFragmentMoofProcessor,\r\n        instance;\r\n\r\n    function setup() {\r\n        ISOBoxer.addBoxProcessor('uuid', uuidProcessor);\r\n        ISOBoxer.addBoxProcessor('saio', saioProcessor);\r\n        ISOBoxer.addBoxProcessor('saiz', saizProcessor);\r\n        ISOBoxer.addBoxProcessor('senc', sencProcessor);\r\n\r\n        mssFragmentMoovProcessor = MssFragmentMoovProcessor(context).create({\r\n            protectionController: protectionController,\r\n            constants: config.constants,\r\n            ISOBoxer: ISOBoxer});\r\n\r\n        mssFragmentMoofProcessor = MssFragmentMoofProcessor(context).create({\r\n            dashMetrics: dashMetrics,\r\n            playbackController: playbackController,\r\n            ISOBoxer: ISOBoxer,\r\n            eventBus: eventBus,\r\n            debug: debug,\r\n            errHandler: config.errHandler\r\n        });\r\n    }\r\n\r\n    function generateMoov(rep) {\r\n        return mssFragmentMoovProcessor.generateMoov(rep);\r\n    }\r\n\r\n    function processFragment(e, streamProcessor) {\r\n        if (!e || !e.request || !e.response) {\r\n            throw new Error('e parameter is missing or malformed');\r\n        }\r\n\r\n        if (e.request.type === 'MediaSegment') {\r\n            // MediaSegment => convert to Smooth Streaming moof format\r\n            mssFragmentMoofProcessor.convertFragment(e, streamProcessor);\r\n\r\n        } else if (e.request.type === HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE) {\r\n            // FragmentInfo (live) => update segments list\r\n            mssFragmentMoofProcessor.updateSegmentList(e, streamProcessor);\r\n\r\n            // Stop event propagation (FragmentInfo must not be added to buffer)\r\n            e.sender = null;\r\n        }\r\n    }\r\n\r\n    instance = {\r\n        generateMoov,\r\n        processFragment\r\n    };\r\n\r\n    setup();\r\n\r\n    return instance;\r\n}\r\n\r\nMssFragmentProcessor.__dashjs_factory_name = 'MssFragmentProcessor';\r\nexport default dashjs.FactoryMaker.getClassFactory(MssFragmentProcessor); /* jshint ignore:line */\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nimport DataChunk from '../streaming/vo/DataChunk.js';\r\nimport FragmentRequest from '../streaming/vo/FragmentRequest.js';\r\nimport MssFragmentInfoController from './MssFragmentInfoController.js';\r\nimport MssFragmentProcessor from './MssFragmentProcessor.js';\r\nimport MssParser from './parser/MssParser.js';\r\nimport MssErrors from './errors/MssErrors.js';\r\nimport DashJSError from '../streaming/vo/DashJSError.js';\r\nimport {HTTPRequest} from '../streaming/vo/metrics/HTTPRequest.js';\r\n\r\nfunction MssHandler(config) {\r\n\r\n    config = config || {};\r\n    const context = this.context;\r\n    const eventBus = config.eventBus;\r\n    const events = config.events;\r\n    const constants = config.constants;\r\n    const initSegmentType = config.initSegmentType;\r\n    const playbackController = config.playbackController;\r\n    const streamController = config.streamController;\r\n    let mssParser,\r\n        mssFragmentProcessor,\r\n        fragmentInfoControllers,\r\n        instance;\r\n\r\n    function setup() {\r\n        fragmentInfoControllers = [];\r\n    }\r\n\r\n    function createMssFragmentProcessor() {\r\n        mssFragmentProcessor = MssFragmentProcessor(context).create(config);\r\n    }\r\n\r\n    function getStreamProcessor(type) {\r\n        return streamController.getActiveStreamProcessors().filter(processor => {\r\n            return processor.getType() === type;\r\n        })[0];\r\n    }\r\n\r\n    function getFragmentInfoController(type) {\r\n        return fragmentInfoControllers.filter(controller => {\r\n            return (controller.getType() === type);\r\n        })[0];\r\n    }\r\n\r\n    function createDataChunk(request, streamId, endFragment) {\r\n        const chunk = new DataChunk();\r\n\r\n        chunk.streamId = streamId;\r\n        chunk.mediaInfo = request.mediaInfo;\r\n        chunk.segmentType = request.type;\r\n        chunk.start = request.startTime;\r\n        chunk.duration = request.duration;\r\n        chunk.end = chunk.start + chunk.duration;\r\n        chunk.index = request.index;\r\n        chunk.quality = request.quality;\r\n        chunk.representationId = request.representationId;\r\n        chunk.endFragment = endFragment;\r\n\r\n        return chunk;\r\n    }\r\n\r\n    function startFragmentInfoControllers() {\r\n\r\n        // Create MssFragmentInfoControllers for each StreamProcessor of active stream (only for audio, video or text)\r\n        let processors = streamController.getActiveStreamProcessors();\r\n        processors.forEach(function (processor) {\r\n            if (processor.getType() === constants.VIDEO ||\r\n                processor.getType() === constants.AUDIO ||\r\n                processor.getType() === constants.TEXT) {\r\n\r\n                let fragmentInfoController = getFragmentInfoController(processor.getType());\r\n                if (!fragmentInfoController) {\r\n                    fragmentInfoController = MssFragmentInfoController(context).create({\r\n                        streamProcessor: processor,\r\n                        baseURLController: config.baseURLController,\r\n                        debug: config.debug\r\n                    });\r\n                    fragmentInfoController.initialize();\r\n                    fragmentInfoControllers.push(fragmentInfoController);\r\n                }\r\n                fragmentInfoController.start();\r\n            }\r\n        });\r\n    }\r\n\r\n    function stopFragmentInfoControllers() {\r\n        fragmentInfoControllers.forEach(c => {\r\n            c.reset();\r\n        });\r\n        fragmentInfoControllers = [];\r\n    }\r\n\r\n    function onInitFragmentNeeded(e) {\r\n        let streamProcessor = getStreamProcessor(e.mediaType);\r\n        if (!streamProcessor) return;\r\n\r\n        // Create init segment request\r\n        let representationController = streamProcessor.getRepresentationController();\r\n        let representation = representationController.getCurrentRepresentation();\r\n        let mediaInfo = streamProcessor.getMediaInfo();\r\n\r\n        let request = new FragmentRequest();\r\n        request.mediaType = representation.adaptation.type;\r\n        request.type = initSegmentType;\r\n        request.range = representation.range;\r\n        request.quality = representation.index;\r\n        request.mediaInfo = mediaInfo;\r\n        request.representationId = representation.id;\r\n\r\n        const chunk = createDataChunk(request, mediaInfo.streamInfo.id, e.type !== events.FRAGMENT_LOADING_PROGRESS);\r\n\r\n        try {\r\n            // Generate init segment (moov)\r\n            chunk.bytes = mssFragmentProcessor.generateMoov(representation);\r\n\r\n            // Notify init segment has been loaded\r\n            eventBus.trigger(events.INIT_FRAGMENT_LOADED,\r\n                { chunk: chunk },\r\n                { streamId: mediaInfo.streamInfo.id, mediaType: representation.adaptation.type }\r\n            );\r\n        } catch (e) {\r\n            config.errHandler.error(new DashJSError(e.code, e.message, e.data));\r\n        }\r\n\r\n        // Change the sender value to stop event to be propagated\r\n        e.sender = null;\r\n    }\r\n\r\n    function onSegmentMediaLoaded(e) {\r\n        if (e.error) return;\r\n\r\n        let streamProcessor = getStreamProcessor(e.request.mediaType);\r\n        if (!streamProcessor) return;\r\n\r\n        // Process moof to transcode it from MSS to DASH (or to update segment timeline for SegmentInfo fragments)\r\n        mssFragmentProcessor.processFragment(e, streamProcessor);\r\n\r\n        if (e.request.type === HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE) {\r\n            // If FragmentInfo loaded, then notify corresponding MssFragmentInfoController\r\n            let fragmentInfoController = getFragmentInfoController(e.request.mediaType);\r\n            if (fragmentInfoController) {\r\n                fragmentInfoController.fragmentInfoLoaded(e);\r\n            }\r\n        }\r\n\r\n        // Start MssFragmentInfoControllers in case of start-over streams\r\n        let manifestInfo = e.request.mediaInfo.streamInfo.manifestInfo;\r\n        if (!manifestInfo.isDynamic && manifestInfo.dvrWindowSize !== Infinity) {\r\n            startFragmentInfoControllers();\r\n        }\r\n    }\r\n\r\n    function onPlaybackPaused() {\r\n        if (playbackController.getIsDynamic() && playbackController.getTime() !== 0) {\r\n            startFragmentInfoControllers();\r\n        }\r\n    }\r\n\r\n    function onPlaybackSeeking() {\r\n        if (playbackController.getIsDynamic() && playbackController.getTime() !== 0) {\r\n            startFragmentInfoControllers();\r\n        }\r\n    }\r\n\r\n    function onTTMLPreProcess(ttmlSubtitles) {\r\n        if (!ttmlSubtitles || !ttmlSubtitles.data) {\r\n            return;\r\n        }\r\n\r\n        ttmlSubtitles.data = ttmlSubtitles.data.replace(/http:\\/\\/www.w3.org\\/2006\\/10\\/ttaf1/gi, 'http://www.w3.org/ns/ttml');\r\n    }\r\n\r\n    function registerEvents() {\r\n        eventBus.on(events.INIT_FRAGMENT_NEEDED, onInitFragmentNeeded, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\r\n        eventBus.on(events.PLAYBACK_PAUSED, onPlaybackPaused, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\r\n        eventBus.on(events.PLAYBACK_SEEKING, onPlaybackSeeking, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\r\n        eventBus.on(events.FRAGMENT_LOADING_COMPLETED, onSegmentMediaLoaded, instance, { priority: dashjs.FactoryMaker.getSingletonFactoryByName(eventBus.getClassName()).EVENT_PRIORITY_HIGH }); /* jshint ignore:line */\r\n        eventBus.on(events.TTML_TO_PARSE, onTTMLPreProcess, instance);\r\n    }\r\n\r\n    function reset() {\r\n        if (mssParser) {\r\n            mssParser.reset();\r\n            mssParser = undefined;\r\n        }\r\n\r\n        eventBus.off(events.INIT_FRAGMENT_NEEDED, onInitFragmentNeeded, this);\r\n        eventBus.off(events.PLAYBACK_PAUSED, onPlaybackPaused, this);\r\n        eventBus.off(events.PLAYBACK_SEEKING, onPlaybackSeeking, this);\r\n        eventBus.off(events.FRAGMENT_LOADING_COMPLETED, onSegmentMediaLoaded, this);\r\n        eventBus.off(events.TTML_TO_PARSE, onTTMLPreProcess, this);\r\n\r\n        // Reset FragmentInfoControllers\r\n        stopFragmentInfoControllers();\r\n    }\r\n\r\n    function createMssParser() {\r\n        mssParser = MssParser(context).create(config);\r\n        return mssParser;\r\n    }\r\n\r\n    instance = {\r\n        reset,\r\n        createMssParser,\r\n        createMssFragmentProcessor,\r\n        registerEvents\r\n    };\r\n\r\n    setup();\r\n\r\n    return instance;\r\n}\r\n\r\nMssHandler.__dashjs_factory_name = 'MssHandler';\r\nconst factory = dashjs.FactoryMaker.getClassFactory(MssHandler); /* jshint ignore:line */\r\nfactory.errors = MssErrors;\r\ndashjs.FactoryMaker.updateClassFactory(MssHandler.__dashjs_factory_name, factory); /* jshint ignore:line */\r\nexport default factory; /* jshint ignore:line */\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\nimport ErrorsBase from '../../core/errors/ErrorsBase.js';\r\n\r\n/**\r\n * @class\r\n *\r\n */\r\nclass MssErrors extends ErrorsBase {\r\n    constructor() {\r\n        super();\r\n        /**\r\n         * Error code returned when no tfrf box is detected in MSS live stream\r\n         */\r\n        this.MSS_NO_TFRF_CODE = 200;\r\n\r\n        /**\r\n         * Error code returned when one of the codecs defined in the manifest is not supported\r\n         */\r\n        this.MSS_UNSUPPORTED_CODEC_CODE = 201;\r\n\r\n        this.MSS_NO_TFRF_MESSAGE = 'Missing tfrf in live media segment';\r\n        this.MSS_UNSUPPORTED_CODEC_MESSAGE = 'Unsupported codec';\r\n    }\r\n}\r\n\r\nlet mssErrors = new MssErrors();\r\nexport default mssErrors;\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @module MssParser\r\n * @ignore\r\n * @param {Object} config object\r\n */\r\n\r\nimport BigInt from '../../../externals/BigInteger.js';\r\n\r\nfunction MssParser(config) {\r\n    config = config || {};\r\n    const BASE64 = config.BASE64;\r\n    const debug = config.debug;\r\n    const constants = config.constants;\r\n    const manifestModel = config.manifestModel;\r\n    const settings = config.settings;\r\n\r\n    const DEFAULT_TIME_SCALE = 10000000.0;\r\n    const SUPPORTED_CODECS = ['AAC', 'AACL', 'AACH', 'AACP', 'AVC1', 'H264', 'TTML', 'DFXP'];\r\n    // MPEG-DASH Role and accessibility mapping for text tracks according to ETSI TS 103 285 v1.1.1 (section 7.1.2)\r\n    const ROLE = {\r\n        'CAPT': 'main',\r\n        'SUBT': 'alternate',\r\n        'DESC': 'main'\r\n    };\r\n    const ACCESSIBILITY = {\r\n        'DESC': '2'\r\n    };\r\n    const samplingFrequencyIndex = {\r\n        96000: 0x0,\r\n        88200: 0x1,\r\n        64000: 0x2,\r\n        48000: 0x3,\r\n        44100: 0x4,\r\n        32000: 0x5,\r\n        24000: 0x6,\r\n        22050: 0x7,\r\n        16000: 0x8,\r\n        12000: 0x9,\r\n        11025: 0xA,\r\n        8000: 0xB,\r\n        7350: 0xC\r\n    };\r\n    const mimeTypeMap = {\r\n        'video': 'video/mp4',\r\n        'audio': 'audio/mp4',\r\n        'text': 'application/mp4'\r\n    };\r\n\r\n    let instance,\r\n        logger,\r\n        initialBufferSettings;\r\n\r\n\r\n    function setup() {\r\n        logger = debug.getLogger(instance);\r\n    }\r\n\r\n    function getAttributeAsBoolean(node, attrName) {\r\n        const value = node.getAttribute(attrName);\r\n        if (!value) return false;\r\n        return value.toLowerCase() === 'true';\r\n    }\r\n\r\n    function mapPeriod(smoothStreamingMedia, timescale) {\r\n        const period = {};\r\n        let streams,\r\n            adaptation;\r\n\r\n        // For each StreamIndex node, create an AdaptationSet element\r\n        period.AdaptationSet = [];\r\n        streams = smoothStreamingMedia.getElementsByTagName('StreamIndex');\r\n        for (let i = 0; i < streams.length; i++) {\r\n            adaptation = mapAdaptationSet(streams[i], timescale);\r\n            if (adaptation !== null) {\r\n                period.AdaptationSet.push(adaptation);\r\n            }\r\n        }\r\n\r\n        return period;\r\n    }\r\n\r\n    function mapAdaptationSet(streamIndex, timescale) {\r\n        const adaptationSet = {};\r\n        const representations = [];\r\n        let segmentTemplate;\r\n        let qualityLevels,\r\n            representation,\r\n            i,\r\n            index;\r\n\r\n        const name = streamIndex.getAttribute('Name');\r\n        const type = streamIndex.getAttribute('Type');\r\n        const lang = streamIndex.getAttribute('Language');\r\n        const fallBackId = lang ? type + '_' + lang : type;\r\n\r\n        adaptationSet.id = name || fallBackId;\r\n        adaptationSet.contentType = type;\r\n        adaptationSet.lang = lang || 'und';\r\n        adaptationSet.mimeType = mimeTypeMap[type];\r\n        adaptationSet.subType = streamIndex.getAttribute('Subtype');\r\n        adaptationSet.maxWidth = streamIndex.getAttribute('MaxWidth');\r\n        adaptationSet.maxHeight = streamIndex.getAttribute('MaxHeight');\r\n\r\n        // Map text tracks subTypes to MPEG-DASH AdaptationSet role and accessibility (see ETSI TS 103 285 v1.1.1, section 7.1.2)\r\n        if (adaptationSet.subType) {\r\n            if (ROLE[adaptationSet.subType]) {\r\n                adaptationSet.Role = [{\r\n                    schemeIdUri: 'urn:mpeg:dash:role:2011',\r\n                    value: ROLE[adaptationSet.subType]\r\n                }];\r\n            }\r\n            if (ACCESSIBILITY[adaptationSet.subType]) {\r\n                adaptationSet.Accessibility = [{\r\n                    schemeIdUri: 'urn:tva:metadata:cs:AudioPurposeCS:2007',\r\n                    value: ACCESSIBILITY[adaptationSet.subType]\r\n                }];\r\n            }\r\n        }\r\n\r\n        // Create a SegmentTemplate with a SegmentTimeline\r\n        segmentTemplate = mapSegmentTemplate(streamIndex, timescale);\r\n\r\n        qualityLevels = streamIndex.getElementsByTagName('QualityLevel');\r\n        // For each QualityLevel node, create a Representation element\r\n        for (i = 0; i < qualityLevels.length; i++) {\r\n            // Propagate BaseURL and mimeType\r\n            qualityLevels[i].BaseURL = adaptationSet.BaseURL;\r\n            qualityLevels[i].mimeType = adaptationSet.mimeType;\r\n\r\n            // Set quality level id\r\n            index = qualityLevels[i].getAttribute('Index');\r\n            qualityLevels[i].Id = adaptationSet.id + ((index !== null) ? ('_' + index) : '');\r\n\r\n            // Map Representation to QualityLevel\r\n            representation = mapRepresentation(qualityLevels[i], streamIndex);\r\n\r\n            if (representation !== null) {\r\n                // Copy SegmentTemplate into Representation\r\n                representation.SegmentTemplate = segmentTemplate;\r\n\r\n                representations.push(representation);\r\n            }\r\n        }\r\n\r\n        if (representations.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        adaptationSet.Representation = representations;\r\n\r\n        // Set SegmentTemplate\r\n        adaptationSet.SegmentTemplate = segmentTemplate;\r\n\r\n        return adaptationSet;\r\n    }\r\n\r\n    function mapRepresentation(qualityLevel, streamIndex) {\r\n        const representation = {};\r\n        const type = streamIndex.getAttribute('Type');\r\n        let fourCCValue = null;\r\n        let width = null;\r\n        let height = null;\r\n\r\n        representation.id = qualityLevel.Id;\r\n        representation.bandwidth = parseInt(qualityLevel.getAttribute('Bitrate'), 10);\r\n        representation.mimeType = qualityLevel.mimeType;\r\n\r\n        width = parseInt(qualityLevel.getAttribute('MaxWidth'), 10);\r\n        height = parseInt(qualityLevel.getAttribute('MaxHeight'), 10);\r\n        if (!isNaN(width)) representation.width = width;\r\n        if (!isNaN(height)) representation.height = height;\r\n\r\n\r\n        fourCCValue = qualityLevel.getAttribute('FourCC');\r\n\r\n        // If FourCC not defined at QualityLevel level, then get it from StreamIndex level\r\n        if (fourCCValue === null || fourCCValue === '') {\r\n            fourCCValue = streamIndex.getAttribute('FourCC');\r\n        }\r\n\r\n        // If still not defined (optionnal for audio stream, see https://msdn.microsoft.com/en-us/library/ff728116%28v=vs.95%29.aspx),\r\n        // then we consider the stream is an audio AAC stream\r\n        if (fourCCValue === null || fourCCValue === '') {\r\n            if (type === constants.AUDIO) {\r\n                fourCCValue = 'AAC';\r\n            } else if (type === constants.VIDEO) {\r\n                logger.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type \"video\"');\r\n                return null;\r\n            }\r\n        }\r\n\r\n        // Check if codec is supported\r\n        if (SUPPORTED_CODECS.indexOf(fourCCValue.toUpperCase()) === -1) {\r\n            // Do not send warning\r\n            logger.warn('Codec not supported: ' + fourCCValue);\r\n            return null;\r\n        }\r\n\r\n        // Get codecs value according to FourCC field\r\n        if (fourCCValue === 'H264' || fourCCValue === 'AVC1') {\r\n            representation.codecs = getH264Codec(qualityLevel);\r\n        } else if (fourCCValue.indexOf('AAC') >= 0) {\r\n            representation.codecs = getAACCodec(qualityLevel, fourCCValue);\r\n            representation.audioSamplingRate = parseInt(qualityLevel.getAttribute('SamplingRate'), 10);\r\n            representation.audioChannels = parseInt(qualityLevel.getAttribute('Channels'), 10);\r\n        } else if (fourCCValue.indexOf('TTML') || fourCCValue.indexOf('DFXP')) {\r\n            representation.codecs = constants.STPP;\r\n        }\r\n\r\n        representation.codecPrivateData = '' + qualityLevel.getAttribute('CodecPrivateData');\r\n        representation.BaseURL = qualityLevel.BaseURL;\r\n\r\n        return representation;\r\n    }\r\n\r\n    function getH264Codec(qualityLevel) {\r\n        let codecPrivateData = qualityLevel.getAttribute('CodecPrivateData').toString();\r\n        let nalHeader,\r\n            avcoti;\r\n\r\n\r\n        // Extract from the CodecPrivateData field the hexadecimal representation of the following\r\n        // three bytes in the sequence parameter set NAL unit.\r\n        // => Find the SPS nal header\r\n        nalHeader = /00000001[0-9]7/.exec(codecPrivateData);\r\n        // => Find the 6 characters after the SPS nalHeader (if it exists)\r\n        avcoti = nalHeader && nalHeader[0] ? (codecPrivateData.substr(codecPrivateData.indexOf(nalHeader[0]) + 10, 6)) : undefined;\r\n\r\n        return 'avc1.' + avcoti;\r\n    }\r\n\r\n    function getAACCodec(qualityLevel, fourCCValue) {\r\n        const samplingRate = parseInt(qualityLevel.getAttribute('SamplingRate'), 10);\r\n        let codecPrivateData = qualityLevel.getAttribute('CodecPrivateData').toString();\r\n        let objectType = 0;\r\n        let codecPrivateDataHex,\r\n            arr16,\r\n            indexFreq,\r\n            extensionSamplingFrequencyIndex;\r\n\r\n        //chrome problem, in implicit AAC HE definition, so when AACH is detected in FourCC\r\n        //set objectType to 5 => strange, it should be 2\r\n        if (fourCCValue === 'AACH') {\r\n            objectType = 0x05;\r\n        }\r\n        //if codecPrivateData is empty, build it :\r\n        if (codecPrivateData === undefined || codecPrivateData === '') {\r\n            objectType = 0x02; //AAC Main Low Complexity => object Type = 2\r\n            indexFreq = samplingFrequencyIndex[samplingRate];\r\n            if (fourCCValue === 'AACH') {\r\n                // 4 bytes :     XXXXX         XXXX          XXXX             XXXX                  XXXXX      XXX   XXXXXXX\r\n                //           ' ObjectType' 'Freq Index' 'Channels value'   'Extens Sampl Freq'  'ObjectType'  'GAS' 'alignment = 0'\r\n                objectType = 0x05; // High Efficiency AAC Profile = object Type = 5 SBR\r\n                codecPrivateData = new Uint8Array(4);\r\n                extensionSamplingFrequencyIndex = samplingFrequencyIndex[samplingRate * 2]; // in HE AAC Extension Sampling frequence\r\n                // equals to SamplingRate*2\r\n                //Freq Index is present for 3 bits in the first byte, last bit is in the second\r\n                codecPrivateData[0] = (objectType << 3) | (indexFreq >> 1);\r\n                codecPrivateData[1] = (indexFreq << 7) | (qualityLevel.Channels << 3) | (extensionSamplingFrequencyIndex >> 1);\r\n                codecPrivateData[2] = (extensionSamplingFrequencyIndex << 7) | (0x02 << 2); // origin object type equals to 2 => AAC Main Low Complexity\r\n                codecPrivateData[3] = 0x0; //alignment bits\r\n\r\n                arr16 = new Uint16Array(2);\r\n                arr16[0] = (codecPrivateData[0] << 8) + codecPrivateData[1];\r\n                arr16[1] = (codecPrivateData[2] << 8) + codecPrivateData[3];\r\n                //convert decimal to hex value\r\n                codecPrivateDataHex = arr16[0].toString(16);\r\n                codecPrivateDataHex = arr16[0].toString(16) + arr16[1].toString(16);\r\n\r\n            } else {\r\n                // 2 bytes :     XXXXX         XXXX          XXXX              XXX\r\n                //           ' ObjectType' 'Freq Index' 'Channels value'   'GAS = 000'\r\n                codecPrivateData = new Uint8Array(2);\r\n                //Freq Index is present for 3 bits in the first byte, last bit is in the second\r\n                codecPrivateData[0] = (objectType << 3) | (indexFreq >> 1);\r\n                codecPrivateData[1] = (indexFreq << 7) | (parseInt(qualityLevel.getAttribute('Channels'), 10) << 3);\r\n                // put the 2 bytes in an 16 bits array\r\n                arr16 = new Uint16Array(1);\r\n                arr16[0] = (codecPrivateData[0] << 8) + codecPrivateData[1];\r\n                //convert decimal to hex value\r\n                codecPrivateDataHex = arr16[0].toString(16);\r\n            }\r\n\r\n            codecPrivateData = '' + codecPrivateDataHex;\r\n            codecPrivateData = codecPrivateData.toUpperCase();\r\n            qualityLevel.setAttribute('CodecPrivateData', codecPrivateData);\r\n        } else if (objectType === 0) {\r\n            objectType = (parseInt(codecPrivateData.substr(0, 2), 16) & 0xF8) >> 3;\r\n        }\r\n\r\n        return 'mp4a.40.' + objectType;\r\n    }\r\n\r\n    function mapSegmentTemplate(streamIndex, timescale) {\r\n        const segmentTemplate = {};\r\n        let mediaUrl,\r\n            streamIndexTimeScale,\r\n            url;\r\n\r\n        url = streamIndex.getAttribute('Url');\r\n        mediaUrl = url ? url.replace('{bitrate}', '$Bandwidth$') : null;\r\n        mediaUrl = mediaUrl ? mediaUrl.replace('{start time}', '$Time$') : null;\r\n\r\n        streamIndexTimeScale = streamIndex.getAttribute('TimeScale');\r\n        streamIndexTimeScale = streamIndexTimeScale ? parseFloat(streamIndexTimeScale) : timescale;\r\n\r\n        segmentTemplate.media = mediaUrl;\r\n        segmentTemplate.timescale = streamIndexTimeScale;\r\n\r\n        segmentTemplate.SegmentTimeline = mapSegmentTimeline(streamIndex, segmentTemplate.timescale);\r\n\r\n        // Patch: set availabilityTimeOffset to Infinity since segments are available as long as they are present in timeline\r\n        segmentTemplate.availabilityTimeOffset = 'INF';\r\n\r\n        return segmentTemplate;\r\n    }\r\n\r\n    function mapSegmentTimeline(streamIndex, timescale) {\r\n        const segmentTimeline = {};\r\n        const chunks = streamIndex.getElementsByTagName('c');\r\n        const segments = [];\r\n        let segment,\r\n            prevSegment,\r\n            tManifest,\r\n            i, j, r;\r\n        let duration = 0;\r\n\r\n        for (i = 0; i < chunks.length; i++) {\r\n            segment = {};\r\n\r\n            // Get time 't' attribute value\r\n            tManifest = chunks[i].getAttribute('t');\r\n\r\n            // => segment.tManifest = original timestamp value as a string (for constructing the fragment request url, see DashHandler)\r\n            // => segment.t = number value of timestamp (maybe rounded value, but only for 0.1 microsecond)\r\n            if (tManifest && BigInt(tManifest).greater(BigInt(Number.MAX_SAFE_INTEGER))) {\r\n                segment.tManifest = tManifest;\r\n            }\r\n            segment.t = parseFloat(tManifest);\r\n\r\n            // Get duration 'd' attribute value\r\n            segment.d = parseFloat(chunks[i].getAttribute('d'));\r\n\r\n            // If 't' not defined for first segment then t=0\r\n            if ((i === 0) && !segment.t) {\r\n                segment.t = 0;\r\n            }\r\n\r\n            if (i > 0) {\r\n                prevSegment = segments[segments.length - 1];\r\n                // Update previous segment duration if not defined\r\n                if (!prevSegment.d) {\r\n                    if (prevSegment.tManifest) {\r\n                        prevSegment.d = BigInt(tManifest).subtract(BigInt(prevSegment.tManifest)).toJSNumber();\r\n                    } else {\r\n                        prevSegment.d = segment.t - prevSegment.t;\r\n                    }\r\n                    duration += prevSegment.d;\r\n                }\r\n                // Set segment absolute timestamp if not set in manifest\r\n                if (!segment.t) {\r\n                    if (prevSegment.tManifest) {\r\n                        segment.tManifest = BigInt(prevSegment.tManifest).add(BigInt(prevSegment.d)).toString();\r\n                        segment.t = parseFloat(segment.tManifest);\r\n                    } else {\r\n                        segment.t = prevSegment.t + prevSegment.d;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (segment.d) {\r\n                duration += segment.d;\r\n            }\r\n\r\n            // Create new segment\r\n            segments.push(segment);\r\n\r\n            // Support for 'r' attribute (i.e. \"repeat\" as in MPEG-DASH)\r\n            r = parseFloat(chunks[i].getAttribute('r'));\r\n            if (r) {\r\n\r\n                for (j = 0; j < (r - 1); j++) {\r\n                    prevSegment = segments[segments.length - 1];\r\n                    segment = {};\r\n                    segment.t = prevSegment.t + prevSegment.d;\r\n                    segment.d = prevSegment.d;\r\n                    if (prevSegment.tManifest) {\r\n                        segment.tManifest = BigInt(prevSegment.tManifest).add(BigInt(prevSegment.d)).toString();\r\n                    }\r\n                    duration += segment.d;\r\n                    segments.push(segment);\r\n                }\r\n            }\r\n        }\r\n\r\n        segmentTimeline.S = segments;\r\n        segmentTimeline.duration = duration / timescale;\r\n\r\n        return segmentTimeline;\r\n    }\r\n\r\n    function getKIDFromProtectionHeader(protectionHeader) {\r\n        let prHeader,\r\n            wrmHeader,\r\n            xmlReader,\r\n            KID;\r\n\r\n        // Get PlayReady header as byte array (base64 decoded)\r\n        prHeader = BASE64.decodeArray(protectionHeader.firstChild.data);\r\n\r\n        // Get Right Management header (WRMHEADER) from PlayReady header\r\n        wrmHeader = getWRMHeaderFromPRHeader(prHeader);\r\n\r\n        if (wrmHeader) {\r\n            // Convert from multi-byte to unicode\r\n            wrmHeader = new Uint16Array(wrmHeader.buffer);\r\n\r\n            // Convert to string\r\n            wrmHeader = String.fromCharCode.apply(null, wrmHeader);\r\n\r\n            // Parse <WRMHeader> to get KID field value\r\n            xmlReader = (new DOMParser()).parseFromString(wrmHeader, 'application/xml');\r\n            KID = xmlReader.querySelector('KID').textContent;\r\n\r\n            // Get KID (base64 decoded) as byte array\r\n            KID = BASE64.decodeArray(KID);\r\n\r\n            // Convert UUID from little-endian to big-endian\r\n            convertUuidEndianness(KID);\r\n        }\r\n\r\n        return KID;\r\n    }\r\n\r\n    function getWRMHeaderFromPRHeader(prHeader) {\r\n        let length,\r\n            recordCount,\r\n            recordType,\r\n            recordLength,\r\n            recordValue;\r\n        let i = 0;\r\n\r\n        // Parse PlayReady header\r\n\r\n        // Length - 32 bits (LE format)\r\n        length = (prHeader[i + 3] << 24) + (prHeader[i + 2] << 16) + (prHeader[i + 1] << 8) + prHeader[i]; // eslint-disable-line\r\n        i += 4;\r\n\r\n        // Record count - 16 bits (LE format)\r\n        recordCount = (prHeader[i + 1] << 8) + prHeader[i]; // eslint-disable-line\r\n        i += 2;\r\n\r\n        // Parse records\r\n        while (i < prHeader.length) {\r\n            // Record type - 16 bits (LE format)\r\n            recordType = (prHeader[i + 1] << 8) + prHeader[i];\r\n            i += 2;\r\n\r\n            // Check if Rights Management header (record type = 0x01)\r\n            if (recordType === 0x01) {\r\n\r\n                // Record length - 16 bits (LE format)\r\n                recordLength = (prHeader[i + 1] << 8) + prHeader[i];\r\n                i += 2;\r\n\r\n                // Record value => contains <WRMHEADER>\r\n                recordValue = new Uint8Array(recordLength);\r\n                recordValue.set(prHeader.subarray(i, i + recordLength));\r\n                return recordValue;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    function convertUuidEndianness(uuid) {\r\n        swapBytes(uuid, 0, 3);\r\n        swapBytes(uuid, 1, 2);\r\n        swapBytes(uuid, 4, 5);\r\n        swapBytes(uuid, 6, 7);\r\n    }\r\n\r\n    function swapBytes(bytes, pos1, pos2) {\r\n        const temp = bytes[pos1];\r\n        bytes[pos1] = bytes[pos2];\r\n        bytes[pos2] = temp;\r\n    }\r\n\r\n\r\n    function createPRContentProtection(protectionHeader) {\r\n        let pro = {\r\n            __text: protectionHeader.firstChild.data,\r\n            __prefix: 'mspr'\r\n        };\r\n        return {\r\n            schemeIdUri: 'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95',\r\n            value: 'com.microsoft.playready',\r\n            pro: pro\r\n        };\r\n    }\r\n\r\n    function createWidevineContentProtection(KID) {\r\n        let widevineCP = {\r\n            schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed',\r\n            value: 'com.widevine.alpha'\r\n        };\r\n        if (!KID)\r\n            return widevineCP;\r\n        // Create Widevine CENC header (Protocol Buffer) with KID value\r\n        const wvCencHeader = new Uint8Array(2 + KID.length);\r\n        wvCencHeader[0] = 0x12;\r\n        wvCencHeader[1] = 0x10;\r\n        wvCencHeader.set(KID, 2);\r\n\r\n        // Create a pssh box\r\n        const length = 12 /* box length, type, version and flags */ + 16 /* SystemID */ + 4 /* data length */ + wvCencHeader.length;\r\n        let pssh = new Uint8Array(length);\r\n        let i = 0;\r\n\r\n        // Set box length value\r\n        pssh[i++] = (length & 0xFF000000) >> 24;\r\n        pssh[i++] = (length & 0x00FF0000) >> 16;\r\n        pssh[i++] = (length & 0x0000FF00) >> 8;\r\n        pssh[i++] = (length & 0x000000FF);\r\n\r\n        // Set type ('pssh'), version (0) and flags (0)\r\n        pssh.set([0x70, 0x73, 0x73, 0x68, 0x00, 0x00, 0x00, 0x00], i);\r\n        i += 8;\r\n\r\n        // Set SystemID ('edef8ba9-79d6-4ace-a3c8-27dcd51d21ed')\r\n        pssh.set([0xed, 0xef, 0x8b, 0xa9, 0x79, 0xd6, 0x4a, 0xce, 0xa3, 0xc8, 0x27, 0xdc, 0xd5, 0x1d, 0x21, 0xed], i);\r\n        i += 16;\r\n\r\n        // Set data length value\r\n        pssh[i++] = (wvCencHeader.length & 0xFF000000) >> 24;\r\n        pssh[i++] = (wvCencHeader.length & 0x00FF0000) >> 16;\r\n        pssh[i++] = (wvCencHeader.length & 0x0000FF00) >> 8;\r\n        pssh[i++] = (wvCencHeader.length & 0x000000FF);\r\n\r\n        // Copy Widevine CENC header\r\n        pssh.set(wvCencHeader, i);\r\n\r\n        // Convert to BASE64 string\r\n        pssh = String.fromCharCode.apply(null, pssh);\r\n        pssh = BASE64.encodeASCII(pssh);\r\n\r\n        widevineCP.pssh = { __text: pssh };\r\n\r\n        return widevineCP;\r\n    }\r\n\r\n    function processManifest(xmlDoc) {\r\n        const manifest = {};\r\n        const contentProtections = [];\r\n        const smoothStreamingMedia = xmlDoc.getElementsByTagName('SmoothStreamingMedia')[0];\r\n        const protection = xmlDoc.getElementsByTagName('Protection')[0];\r\n        let protectionHeader = null;\r\n        let period,\r\n            adaptations,\r\n            contentProtection,\r\n            KID,\r\n            timestampOffset,\r\n            startTime,\r\n            segments,\r\n            timescale,\r\n            segmentDuration,\r\n            i, j;\r\n\r\n        // Set manifest node properties\r\n        manifest.protocol = 'MSS';\r\n        manifest.profiles = 'urn:mpeg:dash:profile:isoff-live:2011';\r\n        manifest.type = getAttributeAsBoolean(smoothStreamingMedia, 'IsLive') ? 'dynamic' : 'static';\r\n        timescale = smoothStreamingMedia.getAttribute('TimeScale');\r\n        manifest.timescale = timescale ? parseFloat(timescale) : DEFAULT_TIME_SCALE;\r\n        let dvrWindowLength = parseFloat(smoothStreamingMedia.getAttribute('DVRWindowLength'));\r\n        // If the DVRWindowLength field is omitted for a live presentation or set to 0, the DVR window is effectively infinite\r\n        if (manifest.type === 'dynamic' && (dvrWindowLength === 0 || isNaN(dvrWindowLength))) {\r\n            dvrWindowLength = Infinity;\r\n        }\r\n        // Star-over\r\n        if (dvrWindowLength === 0 && getAttributeAsBoolean(smoothStreamingMedia, 'CanSeek')) {\r\n            dvrWindowLength = Infinity;\r\n        }\r\n\r\n        if (dvrWindowLength > 0) {\r\n            manifest.timeShiftBufferDepth = dvrWindowLength / manifest.timescale;\r\n        }\r\n\r\n        let duration = parseFloat(smoothStreamingMedia.getAttribute('Duration'));\r\n        manifest.mediaPresentationDuration = (duration === 0) ? Infinity : duration / manifest.timescale;\r\n        // By default, set minBufferTime to 2 sec. (but set below according to video segment duration)\r\n        manifest.minBufferTime = 2;\r\n        manifest.ttmlTimeIsRelative = true;\r\n\r\n        // Live manifest with Duration = start-over\r\n        if (manifest.type === 'dynamic' && duration > 0) {\r\n            manifest.type = 'static';\r\n            // We set timeShiftBufferDepth to initial duration, to be used by MssFragmentController to update segment timeline\r\n            manifest.timeShiftBufferDepth = duration / manifest.timescale;\r\n            // Duration will be set according to current segment timeline duration (see below)\r\n        }\r\n\r\n        if (manifest.type === 'dynamic') {\r\n            manifest.refreshManifestOnSwitchTrack = true; // Refresh manifest when switching tracks\r\n            manifest.doNotUpdateDVRWindowOnBufferUpdated = true; // DVRWindow is update by MssFragmentMoofPocessor based on tfrf boxes\r\n            manifest.ignorePostponeTimePeriod = true; // Never update manifest\r\n            manifest.availabilityStartTime = new Date(null); // Returns 1970\r\n        }\r\n\r\n        // Map period node to manifest root node\r\n        period = mapPeriod(smoothStreamingMedia, manifest.timescale);\r\n        manifest.Period = [period];\r\n\r\n        // Initialize period start time\r\n        period.start = 0;\r\n\r\n        // Uncomment to test live to static manifests\r\n        // if (manifest.type !== 'static') {\r\n        //     manifest.type = 'static';\r\n        //     manifest.mediaPresentationDuration = manifest.timeShiftBufferDepth;\r\n        //     manifest.timeShiftBufferDepth = null;\r\n        // }\r\n\r\n        // ContentProtection node\r\n        if (protection !== undefined) {\r\n            protectionHeader = xmlDoc.getElementsByTagName('ProtectionHeader')[0];\r\n\r\n            // Some packagers put newlines into the ProtectionHeader base64 string, which is not good\r\n            // because this cannot be correctly parsed. Let's just filter out any newlines found in there.\r\n            protectionHeader.firstChild.data = protectionHeader.firstChild.data.replace(/\\n|\\r/g, '');\r\n\r\n            // Get KID (in CENC format) from protection header\r\n            KID = getKIDFromProtectionHeader(protectionHeader);\r\n\r\n            // Create ContentProtection for PlayReady\r\n            contentProtection = createPRContentProtection(protectionHeader);\r\n            contentProtection['cenc:default_KID'] = KID;\r\n            contentProtections.push(contentProtection);\r\n\r\n            // Create ContentProtection for Widevine (as a CENC protection)\r\n            contentProtection = createWidevineContentProtection(KID);\r\n            contentProtection['cenc:default_KID'] = KID;\r\n            contentProtections.push(contentProtection);\r\n\r\n            manifest.ContentProtection = contentProtections;\r\n        }\r\n\r\n        adaptations = period.AdaptationSet;\r\n\r\n        for (i = 0; i < adaptations.length; i += 1) {\r\n            adaptations[i].SegmentTemplate.initialization = '$Bandwidth$';\r\n            // Propagate content protection information into each adaptation\r\n            if (manifest.ContentProtection !== undefined) {\r\n                adaptations[i].ContentProtection = manifest.ContentProtection;\r\n                adaptations[i].ContentProtection = manifest.ContentProtection;\r\n            }\r\n\r\n            if (adaptations[i].contentType === 'video') {\r\n                // Get video segment duration\r\n                segmentDuration = adaptations[i].SegmentTemplate.SegmentTimeline.S[0].d / adaptations[i].SegmentTemplate.timescale;\r\n                // Set minBufferTime to one segment duration\r\n                manifest.minBufferTime = segmentDuration;\r\n\r\n                if (manifest.type === 'dynamic') {\r\n                    // Match timeShiftBufferDepth to video segment timeline duration\r\n                    if (manifest.timeShiftBufferDepth > 0 &&\r\n                        manifest.timeShiftBufferDepth !== Infinity &&\r\n                        manifest.timeShiftBufferDepth > adaptations[i].SegmentTemplate.SegmentTimeline.duration) {\r\n                        manifest.timeShiftBufferDepth = adaptations[i].SegmentTemplate.SegmentTimeline.duration;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Cap minBufferTime to timeShiftBufferDepth\r\n        manifest.minBufferTime = Math.min(manifest.minBufferTime, (manifest.timeShiftBufferDepth ? manifest.timeShiftBufferDepth : Infinity));\r\n\r\n        // In case of live streams:\r\n        // 1- configure player buffering properties according to target live delay\r\n        // 2- adapt live delay and then buffers length in case timeShiftBufferDepth is too small compared to target live delay (see PlaybackController.computeLiveDelay())\r\n        // 3- Set retry attempts and intervals for FragmentInfo requests\r\n        if (manifest.type === 'dynamic') {\r\n            let targetLiveDelay = settings.get().streaming.delay.liveDelay;\r\n            if (!targetLiveDelay) {\r\n                const liveDelayFragmentCount = settings.get().streaming.delay.liveDelayFragmentCount !== null && !isNaN(settings.get().streaming.delay.liveDelayFragmentCount) ? settings.get().streaming.delay.liveDelayFragmentCount : 4;\r\n                targetLiveDelay = segmentDuration * liveDelayFragmentCount;\r\n            }\r\n            let targetDelayCapping = Math.max(manifest.timeShiftBufferDepth - 10/*END_OF_PLAYLIST_PADDING*/, manifest.timeShiftBufferDepth / 2);\r\n            let liveDelay = Math.min(targetDelayCapping, targetLiveDelay);\r\n            // Consider a margin of more than one segment in order to avoid Precondition Failed errors (412), for example if audio and video are not correctly synchronized\r\n            let bufferTime = liveDelay - (segmentDuration * 1.5);\r\n\r\n            // Store initial buffer settings\r\n            initialBufferSettings = {\r\n                'streaming': {\r\n                    'buffer': {\r\n                        'bufferTimeDefault': settings.get().streaming.buffer.bufferTimeDefault,\r\n                        'bufferTimeAtTopQuality': settings.get().streaming.buffer.bufferTimeAtTopQuality,\r\n                        'bufferTimeAtTopQualityLongForm': settings.get().streaming.buffer.bufferTimeAtTopQualityLongForm\r\n                    },\r\n                    'timeShiftBuffer': {\r\n                        calcFromSegmentTimeline: settings.get().streaming.timeShiftBuffer.calcFromSegmentTimeline\r\n                    },\r\n                    'delay': {\r\n                        'liveDelay': settings.get().streaming.delay.liveDelay\r\n                    }\r\n                }\r\n            };\r\n\r\n            settings.update({\r\n                'streaming': {\r\n                    'buffer': {\r\n                        'bufferTimeDefault': bufferTime,\r\n                        'bufferTimeAtTopQuality': bufferTime,\r\n                        'bufferTimeAtTopQualityLongForm': bufferTime\r\n                    },\r\n                    'timeShiftBuffer': {\r\n                        calcFromSegmentTimeline: true\r\n                    },\r\n                    'delay': {\r\n                        'liveDelay': liveDelay\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Delete Content Protection under root manifest node\r\n        delete manifest.ContentProtection;\r\n\r\n        // In case of VOD streams, check if start time is greater than 0\r\n        // Then determine timestamp offset according to higher audio/video start time\r\n        // (use case = live stream delinearization)\r\n        if (manifest.type === 'static') {\r\n            // In case of start-over stream and manifest reloading (due to track switch)\r\n            // we consider previous timestampOffset to keep timelines synchronized\r\n            var prevManifest = manifestModel.getValue();\r\n            if (prevManifest && prevManifest.timestampOffset) {\r\n                timestampOffset = prevManifest.timestampOffset;\r\n            } else {\r\n                for (i = 0; i < adaptations.length; i++) {\r\n                    if (adaptations[i].contentType === constants.AUDIO || adaptations[i].contentType === constants.VIDEO) {\r\n                        segments = adaptations[i].SegmentTemplate.SegmentTimeline.S;\r\n                        startTime = segments[0].t;\r\n                        if (timestampOffset === undefined) {\r\n                            timestampOffset = startTime;\r\n                        }\r\n                        timestampOffset = Math.min(timestampOffset, startTime);\r\n                        // Correct content duration according to minimum adaptation's segment timeline duration\r\n                        // in order to force <video> element sending 'ended' event\r\n                        manifest.mediaPresentationDuration = Math.min(manifest.mediaPresentationDuration, adaptations[i].SegmentTemplate.SegmentTimeline.duration);\r\n                    }\r\n                }\r\n            }\r\n            if (timestampOffset > 0) {\r\n                // Patch segment templates timestamps and determine period start time (since audio/video should not be aligned to 0)\r\n                manifest.timestampOffset = timestampOffset;\r\n                for (i = 0; i < adaptations.length; i++) {\r\n                    segments = adaptations[i].SegmentTemplate.SegmentTimeline.S;\r\n                    for (j = 0; j < segments.length; j++) {\r\n                        if (!segments[j].tManifest) {\r\n                            segments[j].tManifest = segments[j].t.toString();\r\n                        }\r\n                        segments[j].t -= timestampOffset;\r\n                    }\r\n                    if (adaptations[i].contentType === constants.AUDIO || adaptations[i].contentType === constants.VIDEO) {\r\n                        period.start = Math.max(segments[0].t, period.start);\r\n                        adaptations[i].SegmentTemplate.presentationTimeOffset = period.start;\r\n                    }\r\n                }\r\n                period.start /= manifest.timescale;\r\n            }\r\n        }\r\n\r\n        // Floor the duration to get around precision differences between segments timestamps and MSE buffer timestamps\r\n        // and then avoid 'ended' event not being raised\r\n        manifest.mediaPresentationDuration = Math.floor(manifest.mediaPresentationDuration * 1000) / 1000;\r\n        period.duration = manifest.mediaPresentationDuration;\r\n\r\n        return manifest;\r\n    }\r\n\r\n    function parseDOM(data) {\r\n        let xmlDoc = null;\r\n\r\n        if (window.DOMParser) {\r\n            const parser = new window.DOMParser();\r\n\r\n            xmlDoc = parser.parseFromString(data, 'text/xml');\r\n            if (xmlDoc.getElementsByTagName('parsererror').length > 0) {\r\n                throw new Error('parsing the manifest failed');\r\n            }\r\n        }\r\n\r\n        return xmlDoc;\r\n    }\r\n\r\n    function getIron() {\r\n        return null;\r\n    }\r\n\r\n    function internalParse(data) {\r\n        let xmlDoc = null;\r\n        let manifest = null;\r\n\r\n        const startTime = window.performance.now();\r\n\r\n        // Parse the MSS XML manifest\r\n        xmlDoc = parseDOM(data);\r\n\r\n        const xmlParseTime = window.performance.now();\r\n\r\n        if (xmlDoc === null) {\r\n            return null;\r\n        }\r\n\r\n        // Convert MSS manifest into DASH manifest\r\n        manifest = processManifest(xmlDoc, new Date());\r\n\r\n        const mss2dashTime = window.performance.now();\r\n\r\n        logger.info('Parsing complete: (xmlParsing: ' + (xmlParseTime - startTime).toPrecision(3) + 'ms, mss2dash: ' + (mss2dashTime - xmlParseTime).toPrecision(3) + 'ms, total: ' + ((mss2dashTime - startTime) / 1000).toPrecision(3) + 's)');\r\n\r\n        return manifest;\r\n    }\r\n\r\n    function reset() {\r\n        // Restore initial buffer settings\r\n        if (initialBufferSettings) {\r\n            settings.update(initialBufferSettings);\r\n        }\r\n    }\r\n\r\n    instance = {\r\n        parse: internalParse,\r\n        getIron: getIron,\r\n        reset: reset\r\n    };\r\n\r\n    setup();\r\n\r\n    return instance;\r\n}\r\n\r\nMssParser.__dashjs_factory_name = 'MssParser';\r\nexport default dashjs.FactoryMaker.getClassFactory(MssParser); /* jshint ignore:line */\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\nimport EventsBase from '../core/events/EventsBase.js';\r\n\r\n/**\r\n * @class\r\n * @implements EventsBase\r\n */\r\nclass MediaPlayerEvents extends EventsBase {\r\n\r\n    /**\r\n     * @description Public facing external events to be used when developing a player that implements dash.js.\r\n     */\r\n    constructor() {\r\n        super();\r\n        /**\r\n         * Triggered when playback will not start yet\r\n         * as the MPD's availabilityStartTime is in the future.\r\n         * Check delay property in payload to determine time before playback will start.\r\n         * @event MediaPlayerEvents#AST_IN_FUTURE\r\n         */\r\n        this.AST_IN_FUTURE = 'astInFuture';\r\n\r\n        /**\r\n         * Triggered when the BaseURLs have been updated.\r\n         * @event MediaPlayerEvents#BASE_URLS_UPDATED\r\n         */\r\n        this.BASE_URLS_UPDATED = 'baseUrlsUpdated';\r\n\r\n        /**\r\n         * Triggered when the video element's buffer state changes to stalled.\r\n         * Check mediaType in payload to determine type (Video, Audio, FragmentedText).\r\n         * @event MediaPlayerEvents#BUFFER_EMPTY\r\n         */\r\n        this.BUFFER_EMPTY = 'bufferStalled';\r\n\r\n        /**\r\n         * Triggered when the video element's buffer state changes to loaded.\r\n         * Check mediaType in payload to determine type (Video, Audio, FragmentedText).\r\n         * @event MediaPlayerEvents#BUFFER_LOADED\r\n         */\r\n        this.BUFFER_LOADED = 'bufferLoaded';\r\n\r\n        /**\r\n         * Triggered when the video element's buffer state changes, either stalled or loaded. Check payload for state.\r\n         * @event MediaPlayerEvents#BUFFER_LEVEL_STATE_CHANGED\r\n         */\r\n        this.BUFFER_LEVEL_STATE_CHANGED = 'bufferStateChanged';\r\n\r\n        /**\r\n         * Triggered when the buffer level of a media type has been updated\r\n         * @event MediaPlayerEvents#BUFFER_LEVEL_UPDATED\r\n         */\r\n        this.BUFFER_LEVEL_UPDATED = 'bufferLevelUpdated';\r\n\r\n        /**\r\n         * Triggered when a dynamic stream changed to static (transition phase between Live and On-Demand).\r\n         * @event MediaPlayerEvents#DYNAMIC_TO_STATIC\r\n         */\r\n        this.DYNAMIC_TO_STATIC = 'dynamicToStatic';\r\n\r\n        /**\r\n         * Triggered when there is an error from the element or MSE source buffer.\r\n         * @event MediaPlayerEvents#ERROR\r\n         */\r\n        this.ERROR = 'error';\r\n        /**\r\n         * Triggered when a fragment download has completed.\r\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_COMPLETED\r\n         */\r\n        this.FRAGMENT_LOADING_COMPLETED = 'fragmentLoadingCompleted';\r\n\r\n        /**\r\n         * Triggered when a partial fragment download has completed.\r\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_PROGRESS\r\n         */\r\n        this.FRAGMENT_LOADING_PROGRESS = 'fragmentLoadingProgress';\r\n        /**\r\n         * Triggered when a fragment download has started.\r\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_STARTED\r\n         */\r\n        this.FRAGMENT_LOADING_STARTED = 'fragmentLoadingStarted';\r\n\r\n        /**\r\n         * Triggered when a fragment download is abandoned due to detection of slow download base on the ABR abandon rule..\r\n         * @event MediaPlayerEvents#FRAGMENT_LOADING_ABANDONED\r\n         */\r\n        this.FRAGMENT_LOADING_ABANDONED = 'fragmentLoadingAbandoned';\r\n\r\n        /**\r\n         * Triggered when {@link module:Debug} logger methods are called.\r\n         * @event MediaPlayerEvents#LOG\r\n         */\r\n        this.LOG = 'log';\r\n\r\n        /**\r\n         * Triggered when the manifest load is started\r\n         * @event MediaPlayerEvents#MANIFEST_LOADING_STARTED\r\n         */\r\n        this.MANIFEST_LOADING_STARTED = 'manifestLoadingStarted';\r\n\r\n        /**\r\n         * Triggered when the manifest loading is finished, providing the request object information\r\n         * @event MediaPlayerEvents#MANIFEST_LOADING_FINISHED\r\n         */\r\n        this.MANIFEST_LOADING_FINISHED = 'manifestLoadingFinished';\r\n\r\n        /**\r\n         * Triggered when the manifest load is complete, providing the payload\r\n         * @event MediaPlayerEvents#MANIFEST_LOADED\r\n         */\r\n        this.MANIFEST_LOADED = 'manifestLoaded';\r\n\r\n        /**\r\n         * Triggered anytime there is a change to the overall metrics.\r\n         * @event MediaPlayerEvents#METRICS_CHANGED\r\n         */\r\n        this.METRICS_CHANGED = 'metricsChanged';\r\n\r\n        /**\r\n         * Triggered when an individual metric is added, updated or cleared.\r\n         * @event MediaPlayerEvents#METRIC_CHANGED\r\n         */\r\n        this.METRIC_CHANGED = 'metricChanged';\r\n\r\n        /**\r\n         * Triggered every time a new metric is added.\r\n         * @event MediaPlayerEvents#METRIC_ADDED\r\n         */\r\n        this.METRIC_ADDED = 'metricAdded';\r\n\r\n        /**\r\n         * Triggered every time a metric is updated.\r\n         * @event MediaPlayerEvents#METRIC_UPDATED\r\n         */\r\n        this.METRIC_UPDATED = 'metricUpdated';\r\n\r\n        /**\r\n         * Triggered when a new stream (period) starts.\r\n         * @event MediaPlayerEvents#PERIOD_SWITCH_STARTED\r\n         */\r\n        this.PERIOD_SWITCH_STARTED = 'periodSwitchStarted';\r\n\r\n        /**\r\n         * Triggered at the stream end of a period.\r\n         * @event MediaPlayerEvents#PERIOD_SWITCH_COMPLETED\r\n         */\r\n        this.PERIOD_SWITCH_COMPLETED = 'periodSwitchCompleted';\r\n\r\n        /**\r\n         * Triggered when an ABR up /down switch is initiated; either by user in manual mode or auto mode via ABR rules.\r\n         * @event MediaPlayerEvents#QUALITY_CHANGE_REQUESTED\r\n         */\r\n        this.QUALITY_CHANGE_REQUESTED = 'qualityChangeRequested';\r\n\r\n        /**\r\n         * Triggered when the new ABR quality is being rendered on-screen.\r\n         * @event MediaPlayerEvents#QUALITY_CHANGE_RENDERED\r\n         */\r\n        this.QUALITY_CHANGE_RENDERED = 'qualityChangeRendered';\r\n\r\n        /**\r\n         * Triggered when the new track is being rendered.\r\n         * @event MediaPlayerEvents#TRACK_CHANGE_RENDERED\r\n         */\r\n        this.TRACK_CHANGE_RENDERED = 'trackChangeRendered';\r\n\r\n        /**\r\n         * Triggered when a stream (period) is being loaded\r\n         * @event MediaPlayerEvents#STREAM_INITIALIZING\r\n         */\r\n        this.STREAM_INITIALIZING = 'streamInitializing';\r\n\r\n        /**\r\n         * Triggered when a stream (period) is loaded\r\n         * @event MediaPlayerEvents#STREAM_UPDATED\r\n         */\r\n        this.STREAM_UPDATED = 'streamUpdated';\r\n\r\n        /**\r\n         * Triggered when a stream (period) is activated\r\n         * @event MediaPlayerEvents#STREAM_ACTIVATED\r\n         */\r\n        this.STREAM_ACTIVATED = 'streamActivated';\r\n\r\n        /**\r\n         * Triggered when a stream (period) is deactivated\r\n         * @event MediaPlayerEvents#STREAM_DEACTIVATED\r\n         */\r\n        this.STREAM_DEACTIVATED = 'streamDeactivated';\r\n\r\n        /**\r\n         * Triggered when a stream (period) is activated\r\n         * @event MediaPlayerEvents#STREAM_INITIALIZED\r\n         */\r\n        this.STREAM_INITIALIZED = 'streamInitialized';\r\n\r\n        /**\r\n         * Triggered when the player has been reset.\r\n         * @event MediaPlayerEvents#STREAM_TEARDOWN_COMPLETE\r\n         */\r\n        this.STREAM_TEARDOWN_COMPLETE = 'streamTeardownComplete';\r\n\r\n        /**\r\n         * Triggered once all text tracks detected in the MPD are added to the video element.\r\n         * @event MediaPlayerEvents#TEXT_TRACKS_ADDED\r\n         */\r\n        this.TEXT_TRACKS_ADDED = 'allTextTracksAdded';\r\n\r\n        /**\r\n         * Triggered when a text track is added to the video element's TextTrackList\r\n         * @event MediaPlayerEvents#TEXT_TRACK_ADDED\r\n         */\r\n        this.TEXT_TRACK_ADDED = 'textTrackAdded';\r\n\r\n        /**\r\n         * Triggered when a throughput measurement based on the last segment request has been stored\r\n         * @event MediaPlayerEvents#THROUGHPUT_MEASUREMENT_STORED\r\n         */\r\n        this.THROUGHPUT_MEASUREMENT_STORED = 'throughputMeasurementStored';\r\n\r\n        /**\r\n         * Triggered when a ttml chunk is parsed.\r\n         * @event MediaPlayerEvents#TTML_PARSED\r\n         */\r\n        this.TTML_PARSED = 'ttmlParsed';\r\n\r\n        /**\r\n         * Triggered when a ttml chunk has to be parsed.\r\n         * @event MediaPlayerEvents#TTML_TO_PARSE\r\n         */\r\n        this.TTML_TO_PARSE = 'ttmlToParse';\r\n\r\n        /**\r\n         * Triggered when a caption is rendered.\r\n         * @event MediaPlayerEvents#CAPTION_RENDERED\r\n         */\r\n        this.CAPTION_RENDERED = 'captionRendered';\r\n\r\n        /**\r\n         * Triggered when the caption container is resized.\r\n         * @event MediaPlayerEvents#CAPTION_CONTAINER_RESIZE\r\n         */\r\n        this.CAPTION_CONTAINER_RESIZE = 'captionContainerResize';\r\n\r\n        /**\r\n         * Sent when enough data is available that the media can be played,\r\n         * at least for a couple of frames.  This corresponds to the\r\n         * HAVE_ENOUGH_DATA readyState.\r\n         * @event MediaPlayerEvents#CAN_PLAY\r\n         */\r\n        this.CAN_PLAY = 'canPlay';\r\n\r\n        /**\r\n         * This corresponds to the CAN_PLAY_THROUGH readyState.\r\n         * @event MediaPlayerEvents#CAN_PLAY_THROUGH\r\n         */\r\n        this.CAN_PLAY_THROUGH = 'canPlayThrough';\r\n\r\n        /**\r\n         * Sent when playback completes.\r\n         * @event MediaPlayerEvents#PLAYBACK_ENDED\r\n         */\r\n        this.PLAYBACK_ENDED = 'playbackEnded';\r\n\r\n        /**\r\n         * Sent when an error occurs.  The element's error\r\n         * attribute contains more information.\r\n         * @event MediaPlayerEvents#PLAYBACK_ERROR\r\n         */\r\n        this.PLAYBACK_ERROR = 'playbackError';\r\n\r\n        /**\r\n         * Sent when playback is not allowed (for example if user gesture is needed).\r\n         * @event MediaPlayerEvents#PLAYBACK_NOT_ALLOWED\r\n         */\r\n        this.PLAYBACK_NOT_ALLOWED = 'playbackNotAllowed';\r\n\r\n        /**\r\n         * The media's metadata has finished loading; all attributes now\r\n         * contain as much useful information as they're going to.\r\n         * @event MediaPlayerEvents#PLAYBACK_METADATA_LOADED\r\n         */\r\n        this.PLAYBACK_METADATA_LOADED = 'playbackMetaDataLoaded';\r\n\r\n        /**\r\n         * The event is fired when the frame at the current playback position of the media has finished loading;\r\n         * often the first frame\r\n         * @event MediaPlayerEvents#PLAYBACK_LOADED_DATA\r\n         */\r\n        this.PLAYBACK_LOADED_DATA = 'playbackLoadedData';\r\n\r\n        /**\r\n         * Sent when playback is paused.\r\n         * @event MediaPlayerEvents#PLAYBACK_PAUSED\r\n         */\r\n        this.PLAYBACK_PAUSED = 'playbackPaused';\r\n\r\n        /**\r\n         * Sent when the media begins to play (either for the first time, after having been paused,\r\n         * or after ending and then restarting).\r\n         *\r\n         * @event MediaPlayerEvents#PLAYBACK_PLAYING\r\n         */\r\n        this.PLAYBACK_PLAYING = 'playbackPlaying';\r\n\r\n        /**\r\n         * Sent periodically to inform interested parties of progress downloading\r\n         * the media. Information about the current amount of the media that has\r\n         * been downloaded is available in the media element's buffered attribute.\r\n         * @event MediaPlayerEvents#PLAYBACK_PROGRESS\r\n         */\r\n        this.PLAYBACK_PROGRESS = 'playbackProgress';\r\n\r\n        /**\r\n         * Sent when the playback speed changes.\r\n         * @event MediaPlayerEvents#PLAYBACK_RATE_CHANGED\r\n         */\r\n        this.PLAYBACK_RATE_CHANGED = 'playbackRateChanged';\r\n\r\n        /**\r\n         * Sent when a seek operation completes.\r\n         * @event MediaPlayerEvents#PLAYBACK_SEEKED\r\n         */\r\n        this.PLAYBACK_SEEKED = 'playbackSeeked';\r\n\r\n        /**\r\n         * Sent when a seek operation begins.\r\n         * @event MediaPlayerEvents#PLAYBACK_SEEKING\r\n         */\r\n        this.PLAYBACK_SEEKING = 'playbackSeeking';\r\n\r\n        /**\r\n         * Sent when the video element reports stalled\r\n         * @event MediaPlayerEvents#PLAYBACK_STALLED\r\n         */\r\n        this.PLAYBACK_STALLED = 'playbackStalled';\r\n\r\n        /**\r\n         * Sent when playback of the media starts after having been paused;\r\n         * that is, when playback is resumed after a prior pause event.\r\n         *\r\n         * @event MediaPlayerEvents#PLAYBACK_STARTED\r\n         */\r\n        this.PLAYBACK_STARTED = 'playbackStarted';\r\n\r\n        /**\r\n         * The time indicated by the element's currentTime attribute has changed.\r\n         * @event MediaPlayerEvents#PLAYBACK_TIME_UPDATED\r\n         */\r\n        this.PLAYBACK_TIME_UPDATED = 'playbackTimeUpdated';\r\n\r\n        /**\r\n         * Sent when the video element reports that the volume has changed\r\n         * @event MediaPlayerEvents#PLAYBACK_VOLUME_CHANGED\r\n         */\r\n        this.PLAYBACK_VOLUME_CHANGED = 'playbackVolumeChanged';\r\n\r\n        /**\r\n         * Sent when the media playback has stopped because of a temporary lack of data.\r\n         *\r\n         * @event MediaPlayerEvents#PLAYBACK_WAITING\r\n         */\r\n        this.PLAYBACK_WAITING = 'playbackWaiting';\r\n\r\n        /**\r\n         * Manifest validity changed - As a result of an MPD validity expiration event.\r\n         * @event MediaPlayerEvents#MANIFEST_VALIDITY_CHANGED\r\n         */\r\n        this.MANIFEST_VALIDITY_CHANGED = 'manifestValidityChanged';\r\n\r\n        /**\r\n         * Dash events are triggered at their respective start points on the timeline.\r\n         * @event MediaPlayerEvents#EVENT_MODE_ON_START\r\n         */\r\n        this.EVENT_MODE_ON_START = 'eventModeOnStart';\r\n\r\n        /**\r\n         * Dash events are triggered as soon as they were parsed.\r\n         * @event MediaPlayerEvents#EVENT_MODE_ON_RECEIVE\r\n         */\r\n        this.EVENT_MODE_ON_RECEIVE = 'eventModeOnReceive';\r\n\r\n        /**\r\n         * Event that is dispatched whenever the player encounters a potential conformance validation that might lead to unexpected/not optimal behavior\r\n         * @event MediaPlayerEvents#CONFORMANCE_VIOLATION\r\n         */\r\n        this.CONFORMANCE_VIOLATION = 'conformanceViolation';\r\n\r\n        /**\r\n         * Event that is dispatched whenever the player switches to a different representation\r\n         * @event MediaPlayerEvents#REPRESENTATION_SWITCH\r\n         */\r\n        this.REPRESENTATION_SWITCH = 'representationSwitch';\r\n\r\n        /**\r\n         * Event that is dispatched whenever an adaptation set is removed due to all representations not being supported.\r\n         * @event MediaPlayerEvents#ADAPTATION_SET_REMOVED_NO_CAPABILITIES\r\n         */\r\n        this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES = 'adaptationSetRemovedNoCapabilities';\r\n\r\n        /**\r\n         * Triggered when a content steering request has completed.\r\n         * @event MediaPlayerEvents#CONTENT_STEERING_REQUEST_COMPLETED\r\n         */\r\n        this.CONTENT_STEERING_REQUEST_COMPLETED = 'contentSteeringRequestCompleted';\r\n\r\n        /**\r\n         * Triggered when an inband prft (ProducerReferenceTime) boxes has been received.\r\n         * @event MediaPlayerEvents#INBAND_PRFT\r\n         */\r\n        this.INBAND_PRFT = 'inbandPrft';\r\n    }\r\n}\r\n\r\nlet mediaPlayerEvents = new MediaPlayerEvents();\r\nexport default mediaPlayerEvents;\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n/**\r\n * @class\r\n * @ignore\r\n */\r\nclass DashJSError {\r\n    constructor(code, message, data) {\r\n        this.code = code || null;\r\n        this.message = message || null;\r\n        this.data = data || null;\r\n    }\r\n}\r\n\r\nexport default DashJSError;","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @class\r\n * @ignore\r\n */\r\nclass DataChunk {\r\n    //Represents a data structure that keep all the necessary info about a single init/media segment\r\n    constructor() {\r\n        this.streamId = null;\r\n        this.mediaInfo = null;\r\n        this.segmentType = null;\r\n        this.quality = NaN;\r\n        this.index = NaN;\r\n        this.bytes = null;\r\n        this.start = NaN;\r\n        this.end = NaN;\r\n        this.duration = NaN;\r\n        this.representationId = null;\r\n        this.endFragment = null;\r\n    }\r\n}\r\n\r\nexport default DataChunk;","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nimport { HTTPRequest } from './metrics/HTTPRequest.js';\r\n\r\n/**\r\n * @class\r\n * @ignore\r\n */\r\nclass FragmentRequest {\r\n    constructor(url) {\r\n        this.action = FragmentRequest.ACTION_DOWNLOAD;\r\n        this.startTime = NaN;\r\n        this.mediaStartTime = NaN;\r\n        this.mediaType = null;\r\n        this.mediaInfo = null;\r\n        this.type = null;\r\n        this.duration = NaN;\r\n        this.timescale = NaN;\r\n        this.range = null;\r\n        this.url = url || null;\r\n        this.serviceLocation = null;\r\n        this.startDate = null;\r\n        this.firstByteDate = null;\r\n        this.endDate = null;\r\n        this.quality = NaN;\r\n        this.index = NaN;\r\n        this.availabilityStartTime = null;\r\n        this.availabilityEndTime = null;\r\n        this.wallStartTime = null;\r\n        this.bytesLoaded = NaN;\r\n        this.bytesTotal = NaN;\r\n        this.delayLoadingTime = NaN;\r\n        this.responseType = 'arraybuffer';\r\n        this.representationId = null;\r\n    }\r\n\r\n    isInitializationRequest() {\r\n        return (this.type && this.type === HTTPRequest.INIT_SEGMENT_TYPE);\r\n    }\r\n\r\n    setInfo(info) {\r\n        this.type = info && info.init ? HTTPRequest.INIT_SEGMENT_TYPE : HTTPRequest.MEDIA_SEGMENT_TYPE;\r\n        this.url = info && info.url ? info.url : null;\r\n        this.range = info && info.range ? info.range.start + '-' + info.range.end : null;\r\n        this.mediaType = info && info.mediaType ? info.mediaType : null;\r\n    }\r\n}\r\n\r\nFragmentRequest.ACTION_DOWNLOAD = 'download';\r\nFragmentRequest.ACTION_COMPLETE = 'complete';\r\n\r\nexport default FragmentRequest;\r\n","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n/**\r\n * @classdesc This Object holds reference to the HTTPRequest for manifest, fragment and xlink loading.\r\n * Members which are not defined in ISO23009-1 Annex D should be prefixed by a _ so that they are ignored\r\n * by Metrics Reporting code.\r\n * @ignore\r\n */\r\nclass HTTPRequest {\r\n    /**\r\n     * @class\r\n     */\r\n    constructor() {\r\n        /**\r\n         * Identifier of the TCP connection on which the HTTP request was sent.\r\n         * @public\r\n         */\r\n        this.tcpid = null;\r\n        /**\r\n         * This is an optional parameter and should not be included in HTTP request/response transactions for progressive download.\r\n         * The type of the request:\r\n         * - MPD\r\n         * - XLink expansion\r\n         * - Initialization Fragment\r\n         * - Index Fragment\r\n         * - Media Fragment\r\n         * - Bitstream Switching Fragment\r\n         * - other\r\n         * @public\r\n         */\r\n        this.type = null;\r\n        /**\r\n         * The original URL (before any redirects or failures)\r\n         * @public\r\n         */\r\n        this.url = null;\r\n        /**\r\n         * The actual URL requested, if different from above\r\n         * @public\r\n         */\r\n        this.actualurl = null;\r\n        /**\r\n         * The contents of the byte-range-spec part of the HTTP Range header.\r\n         * @public\r\n         */\r\n        this.range = null;\r\n        /**\r\n         * Real-Time | The real time at which the request was sent.\r\n         * @public\r\n         */\r\n        this.trequest = null;\r\n        /**\r\n         * Real-Time | The real time at which the first byte of the response was received.\r\n         * @public\r\n         */\r\n        this.tresponse = null;\r\n        /**\r\n         * The HTTP response code.\r\n         * @public\r\n         */\r\n        this.responsecode = null;\r\n        /**\r\n         * The duration of the throughput trace intervals (ms), for successful requests only.\r\n         * @public\r\n         */\r\n        this.interval = null;\r\n        /**\r\n         * Throughput traces, for successful requests only.\r\n         * @public\r\n         */\r\n        this.trace = [];\r\n        /**\r\n         * The CMSD static and dynamic values retrieved from CMSD response headers.\r\n         * @public\r\n         */\r\n        this.cmsd = null;\r\n\r\n        /**\r\n         * Type of stream (\"audio\" | \"video\" etc..)\r\n         * @public\r\n         */\r\n        this._stream = null;\r\n        /**\r\n         * Real-Time | The real time at which the request finished.\r\n         * @public\r\n         */\r\n        this._tfinish = null;\r\n        /**\r\n         * The duration of the media requests, if available, in seconds.\r\n         * @public\r\n         */\r\n        this._mediaduration = null;\r\n        /**\r\n         * The media segment quality\r\n         * @public\r\n         */\r\n        this._quality = null;\r\n        /**\r\n         * all the response headers from request.\r\n         * @public\r\n         */\r\n        this._responseHeaders = null;\r\n        /**\r\n         * The selected service location for the request. string.\r\n         * @public\r\n         */\r\n        this._serviceLocation = null;\r\n        /**\r\n         * The type of the loader that was used. Distinguish between fetch loader and xhr loader\r\n         */\r\n        this._fileLoaderType = null;\r\n        /**\r\n         * The values derived from the ResourceTimingAPI.\r\n         */\r\n        this._resourceTimingValues = null;\r\n    }\r\n}\r\n\r\n/**\r\n * @classdesc This Object holds reference to the progress of the HTTPRequest.\r\n * @ignore\r\n */\r\nclass HTTPRequestTrace {\r\n    /**\r\n     * @class\r\n     */\r\n    constructor() {\r\n        /**\r\n         * Real-Time | Measurement stream start.\r\n         * @public\r\n         */\r\n        this.s = null;\r\n        /**\r\n         * Measurement stream duration (ms).\r\n         * @public\r\n         */\r\n        this.d = null;\r\n        /**\r\n         * List of integers counting the bytes received in each trace interval within the measurement stream.\r\n         * @public\r\n         */\r\n        this.b = [];\r\n    }\r\n}\r\n\r\nHTTPRequest.GET = 'GET';\r\nHTTPRequest.HEAD = 'HEAD';\r\nHTTPRequest.MPD_TYPE = 'MPD';\r\nHTTPRequest.XLINK_EXPANSION_TYPE = 'XLinkExpansion';\r\nHTTPRequest.INIT_SEGMENT_TYPE = 'InitializationSegment';\r\nHTTPRequest.INDEX_SEGMENT_TYPE = 'IndexSegment';\r\nHTTPRequest.MEDIA_SEGMENT_TYPE = 'MediaSegment';\r\nHTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE = 'BitstreamSwitchingSegment';\r\nHTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE = 'FragmentInfoSegment';\r\nHTTPRequest.DVB_REPORTING_TYPE = 'DVBReporting';\r\nHTTPRequest.LICENSE = 'license';\r\nHTTPRequest.CONTENT_STEERING_TYPE = 'ContentSteering';\r\nHTTPRequest.OTHER_TYPE = 'other';\r\n\r\nexport {HTTPRequest, HTTPRequestTrace};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nimport MssHandler from './MssHandler.js';\r\n\r\n// Shove both of these into the global scope\r\nvar context = (typeof window !== 'undefined' && window) || global;\r\n\r\nvar dashjs = context.dashjs;\r\nif (!dashjs) {\r\n    dashjs = context.dashjs = {};\r\n}\r\n\r\ndashjs.MssHandler = MssHandler;\r\n\r\nexport default dashjs;\r\nexport { MssHandler };\r\n"],"names":["bigInt","undefined","BASE","LOG_BASE","MAX_INT","MAX_INT_ARR","smallToArray","DEFAULT_ALPHABET","supportsNativeBigInt","BigInt","Integer","v","radix","alphabet","caseSensitive","parseValue","parseBase","BigInteger","value","sign","isSmall","prototype","Object","create","SmallInteger","NativeBigInt","isPrecise","n","Math","floor","arrayToSmall","arr","trim","length","compareAbs","i","createArray","x","Array","truncate","ceil","add","a","b","l_a","l_b","r","carry","base","sum","push","addAny","addSmall","l","subtract","negate","abs","plus","a_l","b_l","borrow","difference","subtractAny","subtractSmall","minus","small","multiplyLong","product","a_i","b_j","j","multiplySmall","shiftLeft","concat","multiplyKaratsuba","y","max","slice","d","c","ac","bd","abcd","useKaratsuba","l1","l2","multiply","times","multiplySmallAndArray","_multiplyBySmall","square","a_j","divMod1","result","divisorMostSignificantDigit","lambda","remainder","divisor","quotientDigit","shift","q","divModSmall","divMod2","part","guess","xlen","highx","highy","check","unshift","reverse","quotient","divModAny","self","Error","comparison","qSign","mod","mSign","divmod","divide","over","pow","isEven","toString","_0","_1","_2","isNegative","modPow","exp","isZero","isPositive","isOdd","compare","Infinity","compareTo","equals","eq","notEquals","neq","greater","gt","lesser","lt","greaterOrEquals","geq","lesserOrEquals","leq","isUnit","isDivisibleBy","isBasicPrime","millerRabinTest","nPrev","prev","t","next","isPrime","strict","bits","bitLength","logN","log","toJSNumber","isProbablePrime","iterations","randBetween","modInv","zero","newT","one","newR","lastT","lastR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","String","shiftRight","remQuo","bitwise","fn","xSign","ySign","xRem","not","yRem","xDigit","yDigit","xDivMod","yDivMod","and","or","xor","LOBMASK_I","LOBMASK_BI","roughLOB","integerLogarithm","tmp","p","e","min","gcd","lcm","low","high","range","random","digits","toBase","restricted","top","digit","fromArray","text","toLowerCase","absBase","alphabetValues","start","parseBaseFromArray","val","stringify","apply","map","valueOf","neg","Number","out","left","toBaseString","join","toArray","str","zeros","toJSON","parseInt","parseStringValue","split","decimalPlace","indexOf","isValid","test","parseNumberValue","minusOne","isInstance","module","hasOwnProperty","exports","define","amd","ErrorsBase","errors","config","override","publicOnly","err","EventsBase","events","evt","FragmentRequest","HTTPRequest","MssFragmentInfoController","instance","logger","fragmentModel","started","type","loadFragmentTimeout","startTime","startFragmentTime","index","streamProcessor","baseURLController","debug","controllerType","setup","getLogger","initialize","getType","getFragmentModel","loadNextFragmentInfo","stop","clearTimeout","reset","representation","getCurrentRepresentation","manifest","adaptation","period","mpd","Period","AdaptationSet","segments","SegmentTemplate","SegmentTimeline","S","segment","request","getRequestForSegment","requestFragment","call","timescale","mediaType","MSS_FRAGMENT_INFO_SEGMENT_TYPE","duration","quality","mediaInfo","getMediaInfo","adaptationIndex","representationId","id","url","resolve","path","media","replace","bandwidth","tManifest","representationController","getRepresentationController","isFragmentLoadedOrPending","executeRequest","fragmentInfoLoaded","response","error","deltaFragmentTime","deltaTime","delay","Date","getTime","setTimeout","__dashjs_factory_name","dashjs","FactoryMaker","getClassFactory","DashJSError","MssErrors","Events","MssFragmentMoofProcessor","dashMetrics","playbackController","errorHandler","errHandler","eventBus","ISOBoxer","processTfrf","tfrf","tfdt","timeShiftBufferDepth","MSS_NO_TFRF_CODE","MSS_NO_TFRF_MESSAGE","entries","entry","segmentTime","endTime","availabilityStartTime","parseFloat","fragment_absolute_time","end","baseMediaDecodeTime","updateDVR","getStreamInfo","manifestInfo","fragment_duration","lastSegment","trigger","MANIFEST_VALIDITY_CHANGED","sender","newDuration","isPaused","splice","dvrInfos","getCurrentDVRInfo","addDVRInfo","updateCurrentTime","getBoxOffset","parent","offset","boxes","size","convertFragment","isoFile","parseBuffer","tfhd","fetch","track_ID","traf","createFullBox","version","flags","trun","tfxd","_parent","sepiff","usertype","saio","entry_count","saiz","sample_count","default_sample_info_size","sample_info_size","NumberOfEntries","moof","getLength","data_offset","trafPosInMoof","sencPosInTraf","write","updateSegmentList","MssFragmentMoovProcessor","NALUTYPE_SPS","NALUTYPE_PPS","constants","protectionController","adaptationSet","contentProtection","trackId","createFtypBox","ftyp","createBox","major_brand","minor_version","compatible_brands","createMoovBox","moov","createMvhdBox","trak","createTkhdBox","mdia","createMdhdBox","createHdlrBox","minf","VIDEO","createVmhdBox","AUDIO","createSmhdBox","dinf","createDrefBox","stbl","stts","_data","stsc","stco","stsz","createStsdBox","mvex","createTrexBox","supportedKS","getSupportedKeySystemsFromContentProtection","createProtectionSystemSpecificHeaderBox","mvhd","creation_time","modification_time","round","rate","volume","reserved1","reserved2","matrix","pre_defined","next_track_ID","tkhd","layer","alternate_group","reserved3","width","height","mdhd","language","lang","hdlr","handler_type","name","reserved","vmhd","graphicsmode","opcolor","smhd","balance","dref","location","stsd","createSampleEntry","codec","codecs","substring","createAVCVisualSampleEntry","createMP4AudioSampleEntry","code","MSS_UNSUPPORTED_CODEC_CODE","message","MSS_UNSUPPORTED_CODEC_MESSAGE","data","avc1","data_reference_index","pre_defined1","pre_defined2","horizresolution","vertresolution","frame_count","compressorname","depth","pre_defined3","createAVC1ConfigurationRecord","sinf","createOriginalFormatBox","createSchemeTypeBox","createSchemeInformationBox","avcC","avcCLength","sps","pps","AVCProfileIndication","AVCLevelIndication","profile_compatibility","nalus","codecPrivateData","naluBytes","naluType","hexStringtoBuffer","Uint8Array","set","mp4a","channelcount","audioChannels","samplesize","reserved_3","samplerate","audioSamplingRate","esds","createMPEG4AACESDescriptor","audioSpecificConfig","esdsLength","frma","data_format","stringToCharCode","schm","scheme_type","scheme_version","schi","createTrackEncryptionBox","keySystems","pssh_bytes","pssh","parsedBuffer","initData","Utils","appendBox","tenc","default_IsEncrypted","default_IV_size","default_KID","trex","default_sample_description_index","default_sample_duration","default_sample_size","default_sample_flags","buf","charCodeAt","generateMoov","rep","arrayBuffer","ContentProtection","createFile","arrayEqual","arr1","arr2","every","element","saioProcessor","_procFullBox","_procField","_procFieldArray","saizProcessor","sencProcessor","_procEntries","_procEntryField","_procSubEntries","clearAndCryptedData","uuidProcessor","tfxdUserType","tfrfUserType","sepiffUserType","_parsing","fragment_count","MssFragmentProcessor","context","mssFragmentMoovProcessor","mssFragmentMoofProcessor","addBoxProcessor","processFragment","DataChunk","MssParser","MssHandler","initSegmentType","streamController","mssParser","mssFragmentProcessor","fragmentInfoControllers","createMssFragmentProcessor","getStreamProcessor","getActiveStreamProcessors","filter","processor","getFragmentInfoController","controller","createDataChunk","streamId","endFragment","chunk","segmentType","startFragmentInfoControllers","processors","forEach","TEXT","fragmentInfoController","stopFragmentInfoControllers","onInitFragmentNeeded","streamInfo","FRAGMENT_LOADING_PROGRESS","bytes","INIT_FRAGMENT_LOADED","onSegmentMediaLoaded","isDynamic","dvrWindowSize","onPlaybackPaused","getIsDynamic","onPlaybackSeeking","onTTMLPreProcess","ttmlSubtitles","registerEvents","on","INIT_FRAGMENT_NEEDED","priority","getSingletonFactoryByName","getClassName","EVENT_PRIORITY_HIGH","PLAYBACK_PAUSED","PLAYBACK_SEEKING","FRAGMENT_LOADING_COMPLETED","TTML_TO_PARSE","off","createMssParser","factory","updateClassFactory","mssErrors","BASE64","manifestModel","settings","DEFAULT_TIME_SCALE","SUPPORTED_CODECS","ROLE","ACCESSIBILITY","samplingFrequencyIndex","mimeTypeMap","initialBufferSettings","getAttributeAsBoolean","node","attrName","getAttribute","mapPeriod","smoothStreamingMedia","streams","getElementsByTagName","mapAdaptationSet","streamIndex","representations","segmentTemplate","qualityLevels","fallBackId","contentType","mimeType","subType","maxWidth","maxHeight","Role","schemeIdUri","Accessibility","mapSegmentTemplate","BaseURL","Id","mapRepresentation","Representation","qualityLevel","fourCCValue","isNaN","toUpperCase","warn","getH264Codec","getAACCodec","STPP","nalHeader","avcoti","exec","substr","samplingRate","objectType","codecPrivateDataHex","arr16","indexFreq","extensionSamplingFrequencyIndex","Channels","Uint16Array","setAttribute","mediaUrl","streamIndexTimeScale","mapSegmentTimeline","availabilityTimeOffset","segmentTimeline","chunks","prevSegment","MAX_SAFE_INTEGER","getKIDFromProtectionHeader","protectionHeader","prHeader","wrmHeader","xmlReader","KID","decodeArray","firstChild","getWRMHeaderFromPRHeader","buffer","fromCharCode","DOMParser","parseFromString","querySelector","textContent","convertUuidEndianness","recordCount","recordType","recordLength","recordValue","subarray","uuid","swapBytes","pos1","pos2","temp","createPRContentProtection","pro","__text","__prefix","createWidevineContentProtection","widevineCP","wvCencHeader","encodeASCII","processManifest","xmlDoc","contentProtections","protection","adaptations","timestampOffset","segmentDuration","protocol","profiles","dvrWindowLength","mediaPresentationDuration","minBufferTime","ttmlTimeIsRelative","refreshManifestOnSwitchTrack","doNotUpdateDVRWindowOnBufferUpdated","ignorePostponeTimePeriod","initialization","targetLiveDelay","get","streaming","liveDelay","liveDelayFragmentCount","targetDelayCapping","bufferTime","bufferTimeDefault","bufferTimeAtTopQuality","bufferTimeAtTopQualityLongForm","calcFromSegmentTimeline","timeShiftBuffer","update","prevManifest","getValue","presentationTimeOffset","parseDOM","window","parser","getIron","internalParse","performance","now","xmlParseTime","mss2dashTime","info","toPrecision","parse","MediaPlayerEvents","AST_IN_FUTURE","BASE_URLS_UPDATED","BUFFER_EMPTY","BUFFER_LOADED","BUFFER_LEVEL_STATE_CHANGED","BUFFER_LEVEL_UPDATED","DYNAMIC_TO_STATIC","ERROR","FRAGMENT_LOADING_STARTED","FRAGMENT_LOADING_ABANDONED","LOG","MANIFEST_LOADING_STARTED","MANIFEST_LOADING_FINISHED","MANIFEST_LOADED","METRICS_CHANGED","METRIC_CHANGED","METRIC_ADDED","METRIC_UPDATED","PERIOD_SWITCH_STARTED","PERIOD_SWITCH_COMPLETED","QUALITY_CHANGE_REQUESTED","QUALITY_CHANGE_RENDERED","TRACK_CHANGE_RENDERED","STREAM_INITIALIZING","STREAM_UPDATED","STREAM_ACTIVATED","STREAM_DEACTIVATED","STREAM_INITIALIZED","STREAM_TEARDOWN_COMPLETE","TEXT_TRACKS_ADDED","TEXT_TRACK_ADDED","THROUGHPUT_MEASUREMENT_STORED","TTML_PARSED","CAPTION_RENDERED","CAPTION_CONTAINER_RESIZE","CAN_PLAY","CAN_PLAY_THROUGH","PLAYBACK_ENDED","PLAYBACK_ERROR","PLAYBACK_NOT_ALLOWED","PLAYBACK_METADATA_LOADED","PLAYBACK_LOADED_DATA","PLAYBACK_PLAYING","PLAYBACK_PROGRESS","PLAYBACK_RATE_CHANGED","PLAYBACK_SEEKED","PLAYBACK_STALLED","PLAYBACK_STARTED","PLAYBACK_TIME_UPDATED","PLAYBACK_VOLUME_CHANGED","PLAYBACK_WAITING","EVENT_MODE_ON_START","EVENT_MODE_ON_RECEIVE","CONFORMANCE_VIOLATION","REPRESENTATION_SWITCH","ADAPTATION_SET_REMOVED_NO_CAPABILITIES","CONTENT_STEERING_REQUEST_COMPLETED","INBAND_PRFT","mediaPlayerEvents","NaN","action","ACTION_DOWNLOAD","mediaStartTime","serviceLocation","startDate","firstByteDate","endDate","availabilityEndTime","wallStartTime","bytesLoaded","bytesTotal","delayLoadingTime","responseType","INIT_SEGMENT_TYPE","init","MEDIA_SEGMENT_TYPE","ACTION_COMPLETE","tcpid","actualurl","trequest","tresponse","responsecode","interval","trace","cmsd","_stream","_tfinish","_mediaduration","_quality","_responseHeaders","_serviceLocation","_fileLoaderType","_resourceTimingValues","HTTPRequestTrace","s","GET","HEAD","MPD_TYPE","XLINK_EXPANSION_TYPE","INDEX_SEGMENT_TYPE","BITSTREAM_SWITCHING_SEGMENT_TYPE","DVB_REPORTING_TYPE","LICENSE","CONTENT_STEERING_TYPE","OTHER_TYPE","global"],"sourceRoot":""}